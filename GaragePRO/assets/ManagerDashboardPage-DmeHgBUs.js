import{c as ue,r as l,j as e,a as c,u as He,o as Ie,d as Oe,K as Q,S as Ve,B as v,ao as G,n as $e,e as y,f as C,h as D,bf as X,N as Fe,i as S,ar as ze,M as Ue,y as We,af as qe,z as Ke,a0 as Qe,bg as Ge,J as Xe,D as Ye}from"./index-CNxWMcuV.js";import{S as Ze,a as R}from"./stats-card-jYPMOKW6.js";import{T as es,a as ss,b as E,c as H}from"./tabs-gg0ONG9Z.js";import{D as as,a as ts,E as rs,b as ns,c as I}from"./dropdown-menu-B4ssD23R.js";import{D as Y,b as Z,c as ee,d as se,e as ae,f as te}from"./dialog-CIS6byhQ.js";import{S as re,a as ne,b as le,c as oe,d as p}from"./select-CbHlLrev.js";import{u as ls}from"./use-toast-C9pXjDz0.js";import{L as os}from"./license-plate-BoT_Ewxe.js";import{C as is}from"./car-brand-logo-BjPA7wLP.js";import{i as ie}from"./isWithinInterval-BE2QmPlL.js";import{D as ds}from"./download-CwOjd3gN.js";import{U as de}from"./users-iVsLoBHZ.js";import{C as cs}from"./car-DWakAuoX.js";import{T as ms}from"./triangle-alert-CHSZJu74.js";import{B as xs}from"./briefcase-CQ_aZddD.js";import{A as ce}from"./activity-C2n-WcQv.js";import{S as hs}from"./search-vDLcJ1l5.js";import{F as us}from"./filter-BR7a_zVs.js";import{E as gs}from"./eye-Dbr3NOu6.js";import{S as ps}from"./square-pen-wrU9Jooq.js";import{s as me}from"./subDays-C0x2vdMe.js";import{f as xe}from"./format-DSNd7y_7.js";import"./chevron-down-n_8xVDCk.js";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const js=ue("ArrowUpRight",[["path",{d:"M7 7h10v10",key:"1tivn9"}],["path",{d:"M7 17 17 7",key:"1vkiza"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fs=ue("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]),ge=l.forwardRef(({className:s,...t},r)=>e.jsx("div",{className:"relative w-full overflow-auto",children:e.jsx("table",{ref:r,className:c("w-full caption-bottom text-sm",s),...t})}));ge.displayName="Table";const pe=l.forwardRef(({className:s,...t},r)=>e.jsx("thead",{ref:r,className:c("[&_tr]:border-b",s),...t}));pe.displayName="TableHeader";const je=l.forwardRef(({className:s,...t},r)=>e.jsx("tbody",{ref:r,className:c("[&_tr:last-child]:border-0",s),...t}));je.displayName="TableBody";const bs=l.forwardRef(({className:s,...t},r)=>e.jsx("tfoot",{ref:r,className:c("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",s),...t}));bs.displayName="TableFooter";const O=l.forwardRef(({className:s,...t},r)=>e.jsx("tr",{ref:r,className:c("border-b transition-colors data-[state=selected]:bg-muted hover:bg-muted/50",s),...t}));O.displayName="TableRow";const b=l.forwardRef(({className:s,...t},r)=>e.jsx("th",{ref:r,className:c("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",s),...t}));b.displayName="TableHead";const N=l.forwardRef(({className:s,...t},r)=>e.jsx("td",{ref:r,className:c("p-4 align-middle [&:has([role=checkbox])]:pr-0",s),...t}));N.displayName="TableCell";const Ns=l.forwardRef(({className:s,...t},r)=>e.jsx("caption",{ref:r,className:c("mt-4 text-sm text-muted-foreground",s),...t}));Ns.displayName="TableCaption";function vs(s){const t={not_started:0,in_progress:1,waiting_for_parts:2,completed:3},r={urgent:0,normal:1,low:2};return[...s].sort((m,o)=>{const w=t[m.status]-t[o.status];if(w!==0)return w;const u=r[m.priority]-r[o.priority];return u!==0?u:new Date(o.createdAt).getTime()-new Date(m.createdAt).getTime()})}function ws({name:s,completedJobs:t,avgTime:r,activeJobs:m,efficiency:o}){const w=o>=80?"text-emerald-600":o>=60?"text-amber-600":"text-red-600";return e.jsxs("div",{className:"group flex items-center justify-between p-5 rounded-xl bg-gradient-to-r from-muted/30 to-muted/10 border border-border/50 hover:border-border hover:shadow-sm transition-all duration-300",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"h-12 w-12 rounded-xl bg-gradient-to-br from-primary/20 to-primary/10 flex items-center justify-center",children:e.jsx("span",{className:"text-lg font-semibold text-primary",children:s.split(" ").map(u=>u[0]).join("").slice(0,2)})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-foreground",children:s}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:[m," active jobs"]})]})]}),e.jsxs("div",{className:"flex items-center gap-8",children:[e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-sm font-semibold text-foreground",children:t}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Completed"})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:"text-sm font-semibold text-foreground",children:[r,"m"]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Avg time"})]}),e.jsxs("div",{className:"w-28",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-xs text-muted-foreground",children:"Efficiency"}),e.jsxs("span",{className:c("text-sm font-semibold",w),children:[o,"%"]})]}),e.jsx("div",{className:"h-2 bg-muted rounded-full overflow-hidden",children:e.jsx("div",{className:c("h-full rounded-full transition-all duration-500",o>=80?"bg-emerald-500":o>=60?"bg-amber-500":"bg-red-500"),style:{width:`${o}%`}})})]})]})]})}function he({status:s,t}){const r={not_started:"bg-slate-100 text-slate-700 border-slate-200",in_progress:"bg-blue-50 text-blue-700 border-blue-200",waiting_for_parts:"bg-amber-50 text-amber-700 border-amber-200",completed:"bg-emerald-50 text-emerald-700 border-emerald-200"},m={not_started:t("jobs.notStarted"),in_progress:t("jobs.inProgress"),waiting_for_parts:t("jobs.waitingParts"),completed:t("jobs.completed")};return e.jsx("span",{className:c("inline-flex items-center px-2.5 py-1 rounded-md text-xs font-medium border",r[s]),children:m[s]})}function ys({priority:s,t}){const r={urgent:"bg-red-50 text-red-700 border-red-200",normal:"bg-slate-50 text-slate-600 border-slate-200",low:"bg-slate-50/50 text-slate-500 border-slate-100"},m={urgent:t("jobs.priority.urgent"),normal:t("jobs.priority.normal"),low:t("jobs.priority.low")};return e.jsxs("span",{className:c("inline-flex items-center px-2 py-0.5 rounded text-xs font-medium border",r[s]),children:[s==="urgent"&&e.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-red-500 mr-1.5 animate-pulse"}),m[s]]})}function Ks(){const{t:s}=He(),{user:t}=Ie(),r=Oe(),{toast:m}=ls(),[o,w]=l.useState(""),[u,fe]=l.useState("all"),[be,M]=l.useState(!1),[J,k]=l.useState(null),[Ne,T]=l.useState(!1),[A,V]=l.useState("not_started"),[ve,B]=l.useState(0),[d,we]=l.useState([]),[$,ye]=l.useState([]),[F,Ce]=l.useState([]),[_,De]=l.useState([]),[z,Se]=l.useState([]),[Me,U]=l.useState(!0),[Je,ke]=l.useState(new Map);l.useEffect(()=>{(async()=>{U(!0);try{const[n,h,g,j,f]=await Promise.all([We(),qe(),Ke(),Qe(),Ge()]);we(n),ye(h),Ce(g),De(j),Se(f);const P=new Map;h.forEach(L=>P.set(L.id,L)),ke(P)}catch(n){console.error("Error loading manager dashboard data:",n)}finally{U(!1)}})()},[ve]);const i=l.useMemo(()=>{const a=new Date,n=me(a,7),h=me(a,14),g=d.filter(x=>ie(new Date(x.createdAt),{start:n,end:a})),j=d.filter(x=>ie(new Date(x.createdAt),{start:h,end:n})),f=d.filter(x=>x.status==="completed"),P=d.filter(x=>x.status==="in_progress"),L=d.filter(x=>x.status==="waiting_for_parts"),Le=d.filter(x=>x.priority==="urgent"&&x.status!=="completed"),W=f.length*350,q=f.length*85,K=f.length*120,Re=W-q-K,Ae=d.length>0?Math.round(f.length/d.length*100):0,Be=f.length>0?4.2:0,Ee=j.length>0?Math.round((g.length-j.length)/j.length*100):0;return{totalJobs:d.length,completedJobs:f.length,activeJobs:P.length,pendingParts:L.length,urgentJobs:Le.length,totalRevenue:W,laborCost:q,partsCost:K,profit:Re,completionRate:Ae,avgTurnaround:Be,jobsChange:Ee,totalCustomers:_.length,totalVehicles:$.length,totalMechanics:F.length}},[d,_,$,F]),Te=l.useMemo(()=>{const a=d.filter(n=>{const h=n.customerName.toLowerCase().includes(o.toLowerCase())||n.problemDescription.toLowerCase().includes(o.toLowerCase())||n.id.toLowerCase().includes(o.toLowerCase()),g=u==="all"||n.status===u;return h&&g});return vs(a)},[d,o,u]),_e=()=>{J&&(Xe(J.id),M(!1),k(null),B(a=>a+1),m({title:s("manager.jobDeleted"),description:s("manager.jobDeletedDescription")}))},Pe=async()=>{if(!J||!t)return;const a={status:A,...A==="completed"?{completedAt:new Date().toISOString()}:{}};await Ye(J.id,a,t.id),T(!1),k(null),B(n=>n+1),m({title:s("manager.jobUpdated"),description:s("manager.jobUpdatedDescription")})};return Me?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("p",{className:"text-muted-foreground",children:"Loading dashboard data..."})}):e.jsxs("div",{className:"space-y-8 pb-8",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:s("manager.dashboard")}),e.jsxs(Q,{variant:"secondary",className:"font-normal",children:[e.jsx(Ve,{className:"h-3 w-3 mr-1"}),"Live"]})]}),e.jsx("p",{className:"text-muted-foreground",children:s("manager.dashboardSubtitle")})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(v,{variant:"outline",size:"sm",onClick:()=>B(a=>a+1),className:"h-9",children:[e.jsx(fs,{className:"h-4 w-4 mr-2"}),s("manager.refresh")]}),e.jsxs(v,{variant:"outline",size:"sm",className:"h-9",children:[e.jsx(ds,{className:"h-4 w-4 mr-2"}),s("manager.exportData")]})]})]}),e.jsxs(Ze,{className:"justify-start",children:[e.jsx("div",{onClick:()=>r("/customers"),className:"cursor-pointer hover:scale-105 transition-transform",children:e.jsx(R,{heading:s("manager.kpi.customers"),value:i.totalCustomers,icon:e.jsx(de,{className:"h-6 w-6"}),iconColor:"text-blue-500"})}),e.jsx("div",{onClick:()=>r("/vehicles"),className:"cursor-pointer hover:scale-105 transition-transform",children:e.jsx(R,{heading:s("manager.kpi.vehicles"),value:i.totalVehicles,icon:e.jsx(cs,{className:"h-6 w-6"}),iconColor:"text-violet-500"})}),e.jsx(R,{heading:s("manager.kpi.mechanics"),value:i.totalMechanics,icon:e.jsx(G,{className:"h-6 w-6"}),iconColor:"text-emerald-500"}),e.jsx("div",{onClick:()=>r("/jobs?status=waiting_for_parts"),className:"cursor-pointer hover:scale-105 transition-transform",children:e.jsx(R,{heading:s("manager.kpi.awaitingParts"),value:i.pendingParts,icon:e.jsx(ms,{className:"h-6 w-6"}),iconColor:"text-amber-500"})})]}),e.jsxs(es,{defaultValue:"jobs",className:"space-y-6",children:[e.jsxs(ss,{className:"inline-flex h-11 items-center justify-center rounded-xl bg-muted/50 p-1 text-muted-foreground",children:[e.jsxs(E,{value:"jobs",className:"inline-flex items-center gap-2 rounded-lg px-4 py-2.5 text-sm font-medium transition-all data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",children:[e.jsx(xs,{className:"h-4 w-4"}),s("manager.tabs.jobs")]}),e.jsxs(E,{value:"performance",className:"inline-flex items-center gap-2 rounded-lg px-4 py-2.5 text-sm font-medium transition-all data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",children:[e.jsx(ce,{className:"h-4 w-4"}),s("manager.tabs.performance")]}),e.jsxs(E,{value:"analytics",className:"inline-flex items-center gap-2 rounded-lg px-4 py-2.5 text-sm font-medium transition-all data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",children:[e.jsx($e,{className:"h-4 w-4"}),s("manager.tabs.analytics")]})]}),e.jsx(H,{value:"jobs",className:"space-y-4 mt-6",children:e.jsxs(y,{className:"border-0 shadow-sm",children:[e.jsxs(C,{className:"pb-4",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{children:[e.jsx(D,{className:"text-xl",children:s("manager.jobManagement")}),e.jsx(X,{className:"mt-1",children:s("manager.jobManagementDescription")})]})}),e.jsxs("div",{className:"flex items-center gap-3 mt-5",children:[e.jsxs("div",{className:"relative flex-1 max-w-md",children:[e.jsx(hs,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),e.jsx(Fe,{placeholder:s("manager.searchJobs"),className:"pl-10 h-10 bg-muted/30 border-0 focus-visible:ring-1",value:o,onChange:a=>w(a.target.value)})]}),e.jsxs(re,{value:u,onValueChange:fe,children:[e.jsxs(ne,{className:"w-48 h-10 bg-muted/30 border-0",children:[e.jsx(us,{className:"h-4 w-4 mr-2 text-muted-foreground"}),e.jsx(le,{placeholder:s("manager.filterByStatus")})]}),e.jsxs(oe,{children:[e.jsx(p,{value:"all",children:s("manager.allStatuses")}),e.jsx(p,{value:"not_started",children:s("jobs.notStarted")}),e.jsx(p,{value:"in_progress",children:s("jobs.inProgress")}),e.jsx(p,{value:"waiting_for_parts",children:s("jobs.waitingParts")}),e.jsx(p,{value:"completed",children:s("jobs.completed")})]})]})]})]}),e.jsx(S,{className:"p-0",children:e.jsx(ze,{className:"h-[520px]",children:e.jsxs(ge,{children:[e.jsx(pe,{children:e.jsxs(O,{className:"bg-muted/30 hover:bg-muted/30",children:[e.jsx(b,{className:"font-medium text-muted-foreground",children:"Plate"}),e.jsx(b,{className:"font-medium text-muted-foreground",children:s("manager.table.customer")}),e.jsx(b,{className:"font-medium text-muted-foreground",children:s("manager.table.vehicle")}),e.jsx(b,{className:"font-medium text-muted-foreground",children:s("manager.table.status")}),e.jsx(b,{className:"font-medium text-muted-foreground",children:s("manager.table.priority")}),e.jsx(b,{className:"font-medium text-muted-foreground",children:s("manager.table.created")}),e.jsx(b,{className:"text-right font-medium text-muted-foreground",children:s("manager.table.actions")})]})}),e.jsx(je,{children:Te.map(a=>{const n=Je.get(a.vehicleId),h=a.vehicleLicensePlate||(n==null?void 0:n.licensePlate)||"-",g=a.vehicleBrand||(n==null?void 0:n.brand),j=a.vehicleModel||(n==null?void 0:n.model);return e.jsxs(O,{className:"group",children:[e.jsx(N,{children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(is,{brand:g||"",size:"md",className:"text-primary"}),h!=="-"?e.jsx(os,{plateNumber:h,size:"sm"}):e.jsx("span",{className:"text-muted-foreground",children:"-"})]})}),e.jsx(N,{children:e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:a.customerName}),e.jsx("p",{className:"text-sm text-muted-foreground",children:a.customerPhone})]})}),e.jsx(N,{className:"text-muted-foreground",children:g&&j?`${g} ${j}${n!=null&&n.year?` (${n.year})`:""}`:"-"}),e.jsx(N,{children:e.jsx(he,{status:a.status,t:s})}),e.jsx(N,{children:e.jsx(ys,{priority:a.priority,t:s})}),e.jsx(N,{className:"text-muted-foreground",children:xe(new Date(a.createdAt),"dd/MM/yyyy")}),e.jsx(N,{className:"text-right",children:e.jsxs(as,{children:[e.jsx(ts,{asChild:!0,children:e.jsx(v,{variant:"ghost",size:"icon",className:"h-8 w-8 opacity-0 group-hover:opacity-100 transition-opacity",children:e.jsx(rs,{className:"h-4 w-4"})})}),e.jsxs(ns,{align:"end",className:"w-40",children:[e.jsxs(I,{onClick:()=>r(`/jobs/${a.id}`),children:[e.jsx(gs,{className:"h-4 w-4 mr-2"}),s("manager.actions.view")]}),e.jsxs(I,{onClick:()=>{k(a),V(a.status),T(!0)},children:[e.jsx(ps,{className:"h-4 w-4 mr-2"}),s("manager.actions.edit")]}),e.jsxs(I,{className:"text-destructive focus:text-destructive",onClick:()=>{k(a),M(!0)},children:[e.jsx(Ue,{className:"h-4 w-4 mr-2"}),s("manager.actions.delete")]})]})]})})]},a.id)})})]})})})]})}),e.jsxs(H,{value:"performance",className:"space-y-6 mt-6",children:[e.jsxs(y,{className:"border-0 shadow-sm",children:[e.jsxs(C,{children:[e.jsx(D,{className:"text-xl",children:s("manager.mechanicPerformance")}),e.jsx(X,{children:s("manager.mechanicPerformanceDescription")})]}),e.jsxs(S,{className:"space-y-3",children:[z.map(a=>e.jsx(ws,{name:a.name,completedJobs:a.completedJobs,avgTime:a.avgTime,activeJobs:a.activeJobs,efficiency:Math.min(100,Math.round(60+Math.random()*40))},a.id)),z.length===0&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx(G,{className:"h-12 w-12 text-muted-foreground/30 mx-auto mb-4"}),e.jsx("p",{className:"text-muted-foreground",children:s("manager.noMechanicsData")})]})]})]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-5",children:[e.jsxs(y,{className:"border-0 shadow-sm",children:[e.jsx(C,{children:e.jsx(D,{className:"text-lg font-semibold",children:s("manager.costBreakdown")})}),e.jsx(S,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center py-2",children:[e.jsx("span",{className:"text-muted-foreground",children:s("manager.laborCost")}),e.jsxs("span",{className:"font-semibold",children:["€",i.laborCost.toLocaleString()]})]}),e.jsxs("div",{className:"flex justify-between items-center py-2",children:[e.jsx("span",{className:"text-muted-foreground",children:s("manager.partsCost")}),e.jsxs("span",{className:"font-semibold",children:["€",i.partsCost.toLocaleString()]})]}),e.jsx("div",{className:"border-t pt-4",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"font-semibold",children:s("manager.netProfit")}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(js,{className:"h-4 w-4 text-emerald-500"}),e.jsxs("span",{className:"text-xl font-bold text-emerald-600",children:["€",i.profit.toLocaleString()]})]})]})})]})})]}),e.jsxs(y,{className:"border-0 shadow-sm",children:[e.jsx(C,{children:e.jsx(D,{className:"text-lg font-semibold",children:s("manager.jobDistribution")})}),e.jsx(S,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between text-sm mb-2",children:[e.jsx("span",{className:"text-muted-foreground",children:s("jobs.completed")}),e.jsx("span",{className:"font-medium",children:i.completedJobs})]}),e.jsx("div",{className:"h-2 bg-muted rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-emerald-500 rounded-full transition-all duration-500",style:{width:`${i.completedJobs/Math.max(i.totalJobs,1)*100}%`}})})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between text-sm mb-2",children:[e.jsx("span",{className:"text-muted-foreground",children:s("jobs.inProgress")}),e.jsx("span",{className:"font-medium",children:i.activeJobs})]}),e.jsx("div",{className:"h-2 bg-muted rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-blue-500 rounded-full transition-all duration-500",style:{width:`${i.activeJobs/Math.max(i.totalJobs,1)*100}%`}})})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between text-sm mb-2",children:[e.jsx("span",{className:"text-muted-foreground",children:s("jobs.waitingParts")}),e.jsx("span",{className:"font-medium",children:i.pendingParts})]}),e.jsx("div",{className:"h-2 bg-muted rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-amber-500 rounded-full transition-all duration-500",style:{width:`${i.pendingParts/Math.max(i.totalJobs,1)*100}%`}})})]})]})})]})]})]}),e.jsx(H,{value:"analytics",className:"space-y-5 mt-6",children:e.jsxs("div",{className:"grid md:grid-cols-2 gap-5",children:[e.jsxs(y,{className:"border-0 shadow-sm",children:[e.jsx(C,{children:e.jsx(D,{className:"text-lg font-semibold",children:s("manager.customerInsights")})}),e.jsx(S,{children:e.jsxs("div",{className:"space-y-3",children:[_.slice(0,5).map((a,n)=>e.jsxs("div",{className:"flex items-center justify-between p-4 rounded-xl bg-muted/30 hover:bg-muted/50 transition-colors",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"h-10 w-10 rounded-full bg-gradient-to-br from-primary/20 to-primary/10 flex items-center justify-center",children:e.jsx("span",{className:"text-sm font-semibold text-primary",children:a.name.split(" ").map(h=>h[0]).join("").slice(0,2)})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:a.name}),e.jsx("p",{className:"text-sm text-muted-foreground",children:a.phone})]})]}),e.jsxs(Q,{variant:"secondary",className:"font-medium",children:[a.jobCount," ",s("manager.jobs")]})]},n)),_.length===0&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx(de,{className:"h-12 w-12 text-muted-foreground/30 mx-auto mb-4"}),e.jsx("p",{className:"text-muted-foreground",children:"No customer data yet"})]})]})})]}),e.jsxs(y,{className:"border-0 shadow-sm",children:[e.jsx(C,{children:e.jsx(D,{className:"text-lg font-semibold",children:s("manager.recentActivity")})}),e.jsx(S,{children:e.jsxs("div",{className:"space-y-3",children:[d.slice(0,5).map(a=>e.jsxs("div",{className:"flex items-center gap-4 p-4 rounded-xl bg-muted/30 hover:bg-muted/50 transition-colors",children:[e.jsx("div",{className:c("h-2.5 w-2.5 rounded-full flex-shrink-0",a.status==="completed"?"bg-emerald-500":a.status==="in_progress"?"bg-blue-500":a.status==="waiting_for_parts"?"bg-amber-500":"bg-slate-400")}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"font-medium truncate",children:a.customerName}),e.jsx("p",{className:"text-sm text-muted-foreground",children:xe(new Date(a.updatedAt),"dd/MM/yyyy HH:mm")})]}),e.jsx(he,{status:a.status,t:s})]},a.id)),d.length===0&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx(ce,{className:"h-12 w-12 text-muted-foreground/30 mx-auto mb-4"}),e.jsx("p",{className:"text-muted-foreground",children:"No recent activity"})]})]})})]})]})})]}),e.jsx(Y,{open:be,onOpenChange:M,children:e.jsxs(Z,{className:"sm:max-w-md",children:[e.jsxs(ee,{children:[e.jsx(se,{children:s("manager.deleteJob")}),e.jsx(ae,{children:s("manager.deleteJobConfirmation")})]}),e.jsxs(te,{className:"gap-2 sm:gap-0",children:[e.jsx(v,{variant:"outline",onClick:()=>M(!1),children:s("common.cancel")}),e.jsx(v,{variant:"destructive",onClick:_e,children:s("common.delete")})]})]})}),e.jsx(Y,{open:Ne,onOpenChange:T,children:e.jsxs(Z,{className:"sm:max-w-md",children:[e.jsxs(ee,{children:[e.jsx(se,{children:s("manager.editJob")}),e.jsx(ae,{children:s("manager.editJobDescription")})]}),e.jsxs("div",{className:"py-4",children:[e.jsx("label",{className:"text-sm font-medium",children:s("manager.table.status")}),e.jsxs(re,{value:A,onValueChange:a=>V(a),children:[e.jsx(ne,{className:"mt-2",children:e.jsx(le,{})}),e.jsxs(oe,{children:[e.jsx(p,{value:"not_started",children:s("jobs.notStarted")}),e.jsx(p,{value:"in_progress",children:s("jobs.inProgress")}),e.jsx(p,{value:"waiting_for_parts",children:s("jobs.waitingParts")}),e.jsx(p,{value:"completed",children:s("jobs.completed")})]})]})]}),e.jsxs(te,{className:"gap-2 sm:gap-0",children:[e.jsx(v,{variant:"outline",onClick:()=>T(!1),children:s("common.cancel")}),e.jsx(v,{onClick:Pe,children:s("common.save")})]})]})})]})}export{Ks as default};
