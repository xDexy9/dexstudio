import{c as Le,r as c,j as e,a as O,E as _e,T as Re,F as $e,G as Be,H as Oe,o as Ee,u as H,d as K,t as Ve,I as Fe,v as He,J as Ye,s as ae,K as q,B as k,M as Ue,X as Ge,P as ne,N as le,e as pe,i as qe,U as Ke,k as Qe,O as We}from"./index-CNxWMcuV.js";import{T as re,a as ie,b as _,c as R}from"./tabs-gg0ONG9Z.js";import{S as ce,a as oe,b as de,c as me,d as D}from"./select-CbHlLrev.js";import{C as fe}from"./checkbox-CtHhNy01.js";import{A as Xe,a as Ze,b as es,c as ss,d as ts,e as as,f as ns,g as ls}from"./alert-dialog-BDITvcmU.js";import{g as je}from"./jobTranslation-C42sppDK.js";import{L as Ne}from"./license-plate-BoT_Ewxe.js";import{C as ye}from"./car-brand-logo-BjPA7wLP.js";import{u as rs,P as ue}from"./Pagination-r2zL6nJ4.js";import{S as is}from"./square-check-big-B3VzhogF.js";import{S as he}from"./search-vDLcJ1l5.js";import{L as cs}from"./layout-grid-BWDaq3YL.js";import{M as os}from"./message-square-BrEHgpxS.js";import"./chevron-down-n_8xVDCk.js";import"./googleTranslate-BIF2yF35.js";import"./car-DWakAuoX.js";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ds=Le("List",[["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 18h.01",key:"1tta3j"}],["path",{d:"M3 6h.01",key:"1rqtza"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 18h13",key:"1lx6n3"}],["path",{d:"M8 6h13",key:"ik3vkj"}]]);function ms({onRefresh:s,threshold:a=80}){const[r,l]=c.useState(!1),[i,o]=c.useState(0),m=c.useRef(0),d=c.useRef(!1),h=c.useCallback(j=>{(document.documentElement.scrollTop||document.body.scrollTop)===0&&(m.current=j.touches[0].clientY,d.current=!0)},[]),P=c.useCallback(j=>{if(!d.current||r)return;const y=j.touches[0].clientY,w=Math.max(0,y-m.current);o(Math.min(w*.4,a*1.5))},[r,a]),b=c.useCallback(async()=>{if(d.current)if(d.current=!1,i>=a&&!r){l(!0),o(a);try{await s()}finally{l(!1),o(0)}}else o(0)},[i,a,r,s]);return{isRefreshing:r,pullDistance:i,handlers:{onTouchStart:h,onTouchMove:P,onTouchEnd:b}}}function us({children:s,onRefresh:a,className:r}){const{isRefreshing:l,pullDistance:i,handlers:o}=ms({onRefresh:a}),m=i>10||l,d=i>=80||l;return e.jsxs("div",{className:O("relative",r),...o,children:[e.jsx("div",{className:"absolute left-0 right-0 flex justify-center transition-opacity duration-200 z-10",style:{top:Math.min(i-40,40),opacity:m?1:0},children:e.jsx("div",{className:O("w-10 h-10 rounded-full bg-background border shadow-lg flex items-center justify-center transition-transform",d&&"scale-110"),children:e.jsx(_e,{className:O("h-5 w-5 text-primary transition-transform",l&&"animate-spin"),style:{transform:l?void 0:`rotate(${i*3}deg)`}})})}),e.jsx("div",{style:{transform:`translateY(${i}px)`,transition:i===0?"transform 0.2s ease-out":"none"},children:s})]})}const xe={not_started:{warning:3,critical:7},in_progress:{warning:5,critical:10},waiting_for_parts:{warning:7,critical:14},completed:{warning:1/0,critical:1/0}},hs=5;function ge(s){const a=new Date(s),l=Math.abs(new Date().getTime()-a.getTime());return Math.ceil(l/(1e3*60*60*24))}function xs(s){const a=ge(s.createdAt),r=s.updatedAt?new Date(s.updatedAt):new Date(s.createdAt),l=ge(r.toISOString()),i=l>=hs;let o=0;s.estimatedDuration&&(o=Math.max(0,a-s.estimatedDuration));const m=xe[s.status]||xe.in_progress;let d,h;return o>0?(d="overdue",h=`${o} day${o!==1?"s":""} overdue`):a>=m.critical?(d="critical",h=`In ${s.status.replace("_"," ")} for ${a} days`):a>=m.warning?(d="warning",h=`In ${s.status.replace("_"," ")} for ${a} days`):i&&s.status!=="completed"?(d="warning",h=`No updates for ${l} days`):(d="healthy",h="On track"),{health:d,reason:h,daysOld:a,daysOverdue:o,isInactive:i,lastUpdate:r}}function gs(s){switch(s){case"healthy":return"Healthy";case"warning":return"Needs Attention";case"critical":return"Critical";case"overdue":return"Overdue";default:return"Unknown"}}function we({job:s}){const a=xs(s),{health:r,reason:l}=a;if(s.status==="completed"&&r==="healthy")return null;const i=o=>{switch(o){case"healthy":return"bg-green-500";case"warning":return"bg-yellow-500";case"critical":return"bg-orange-500";case"overdue":return"bg-red-500 animate-pulse";default:return"bg-gray-500"}};return e.jsx(Re,{children:e.jsxs($e,{children:[e.jsx(Be,{asChild:!0,children:e.jsx("div",{className:O("h-2 w-2 rounded-full",i(r))})}),e.jsx(Oe,{side:"top",children:e.jsxs("div",{className:"text-xs",children:[e.jsx("p",{className:"font-semibold",children:gs(r)}),e.jsx("p",{children:l})]})})]})})}function F(s){const a={not_started:0,in_progress:1,waiting_for_parts:2,completed:3},r={urgent:0,normal:1,low:2};return[...s].sort((l,i)=>{const o=a[l.status]-a[i.status];if(o!==0)return o;const m=r[l.priority]-r[i.priority];return m!==0?m:new Date(i.createdAt).getTime()-new Date(l.createdAt).getTime()})}function ve({status:s}){const{t:a}=H(),r={not_started:{class:"status-not-started",label:a("jobs.notStarted")},in_progress:{class:"status-in-progress",label:a("jobs.inProgress")},waiting_for_parts:{class:"status-waiting",label:a("jobs.waitingParts")},completed:{class:"status-completed",label:a("jobs.completed")}},{class:l,label:i}=r[s];return e.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium whitespace-nowrap shrink-0 ${l}`,children:i})}function z({job:s,userId:a,userLanguage:r,vehicle:l,mechanic:i,unreadCount:o,userRole:m}){const d=K(),{t:h}=H(),P=m!=="mechanic",b=s.vehicleLicensePlate||(l==null?void 0:l.licensePlate),j=s.vehicleBrand||(l==null?void 0:l.brand),y=s.vehicleModel||(l==null?void 0:l.model),w=s.vehicleYear||(l==null?void 0:l.year);return e.jsx(pe,{className:"cursor-pointer hover:shadow-md transition-shadow",onClick:()=>d(`/jobs/${s.id}`),children:e.jsxs(qe,{className:"p-4",children:[e.jsxs("div",{className:"flex items-start justify-between gap-2 mb-2",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ye,{brand:j||"",size:"md",className:"text-primary shrink-0"}),b?e.jsx(Ne,{plateNumber:b,size:"sm"}):e.jsx("span",{className:"font-semibold text-muted-foreground",children:h("jobs.noVehicle")}),e.jsx(we,{job:s}),o&&o>0&&e.jsxs("div",{className:"relative flex items-center shrink-0",children:[e.jsx(os,{className:"h-4 w-4 text-muted-foreground"}),e.jsx(Ke,{count:o,className:"-top-1 -right-2"})]})]}),(j||y)&&e.jsxs("p",{className:"text-sm text-muted-foreground",children:[j," ",y," ",w?`(${w})`:""]}),P&&e.jsx("p",{className:"text-xs text-muted-foreground/70",children:s.customerName})]}),e.jsx(ve,{status:s.status})]}),e.jsx("p",{className:"text-sm text-muted-foreground line-clamp-2",children:je(s,r)}),e.jsxs("div",{className:"mt-2 flex items-center justify-between",children:[e.jsx("span",{className:`text-xs font-medium uppercase priority-${s.priority}`,children:h(`jobs.priority.${s.priority}`)}),e.jsx("span",{className:"text-xs text-muted-foreground",children:new Date(s.createdAt).toLocaleDateString("en-GB")})]}),P&&e.jsx("p",{className:"mt-1 text-xs",children:i!=null&&i.fullName?e.jsx("span",{className:"text-primary/80 font-medium",children:i.fullName}):e.jsx("span",{className:"text-muted-foreground/50",children:h("jobs.unassigned")})})]})})}function ps({job:s,userId:a,userLanguage:r,vehicle:l,mechanic:i,unreadCount:o,userRole:m,isSelected:d,onSelect:h,selectionMode:P}){const b=K(),{t:j}=H(),y=m!=="mechanic",w=s.vehicleLicensePlate||(l==null?void 0:l.licensePlate),I=s.vehicleBrand||(l==null?void 0:l.brand),$=s.vehicleModel||(l==null?void 0:l.model),S=s.vehicleYear||(l==null?void 0:l.year),Y=()=>{P&&h?h(s.id,!d):b(`/jobs/${s.id}`)};return e.jsxs("tr",{className:O("border-b hover:bg-muted/50 cursor-pointer transition-colors",d&&"bg-primary/10"),onClick:Y,children:[P&&e.jsx("td",{className:"p-4 w-12",onClick:J=>J.stopPropagation(),children:e.jsx(fe,{checked:d,onCheckedChange:J=>h==null?void 0:h(s.id,J)})}),e.jsxs("td",{className:"p-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(ye,{brand:I||"",size:"md",className:"text-primary"}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2",children:[w?e.jsx(Ne,{plateNumber:w,size:"sm"}):e.jsx("span",{className:"font-medium text-muted-foreground",children:j("jobs.noVehicle")}),e.jsx(we,{job:s}),o&&o>0&&e.jsx(q,{variant:"destructive",className:"h-5 w-5 p-0 flex items-center justify-center text-[10px]",children:o})]}),(I||$)&&e.jsxs("p",{className:"text-sm text-muted-foreground",children:[I," ",$," ",S?`(${S})`:""]})]})]}),y&&e.jsx("p",{className:"text-xs text-muted-foreground/70",children:s.customerName})]}),e.jsx("td",{className:"p-4",children:e.jsx("p",{className:"line-clamp-2 text-sm max-w-xs",children:je(s,r)})}),e.jsx("td",{className:"p-4",children:e.jsx(ve,{status:s.status})}),e.jsx("td",{className:"p-4",children:e.jsx("span",{className:`text-xs font-medium uppercase priority-${s.priority} px-2 py-1 rounded-full`,children:j(`jobs.priority.${s.priority}`)})}),e.jsx("td",{className:"p-4 text-sm text-muted-foreground",children:(i==null?void 0:i.fullName)||e.jsx("span",{className:"text-muted-foreground/50",children:j("jobs.unassigned")})}),e.jsx("td",{className:"p-4 text-sm text-muted-foreground",children:new Date(s.createdAt).toLocaleDateString("en-GB")})]})}function zs(){const{user:s}=Ee(),{t:a,language:r}=H(),l=K(),i=Ve(),[o]=Fe(),[m,d]=c.useState(""),[h,P]=c.useState(0),[b,j]=c.useState("table"),[y,w]=c.useState(o.get("status")||"all"),[I,$]=c.useState("all"),[S,Y]=c.useState([]),[J,be]=c.useState([]),[Q,Ie]=c.useState([]),[Se,W]=c.useState(!0),[C,Ce]=c.useState(new Map),[T,Pe]=c.useState(new Map),[E,X]=c.useState(!1),[N,B]=c.useState(new Set),[Me,U]=c.useState(!1),[G,Z]=c.useState(!1);c.useEffect(()=>{const t=o.get("status");t&&w(t)},[o]),c.useEffect(()=>{W(!0);const t=He(n=>{if(Y(n),s){const p=n.filter(f=>f.assignedMechanicId===s.id);be(p);const A=n.filter(f=>!f.assignedMechanicId&&f.status==="not_started");Ie(A)}const x=async()=>{const A=[...new Set(n.map(v=>v.vehicleId).filter(Boolean))].map(async v=>{const M=await Qe(v);return{vehicleId:v,vehicle:M}}),f=await Promise.all(A);Ce(v=>{const M=new Map(v);return f.forEach(({vehicleId:V,vehicle:te})=>{te&&M.set(V,te)}),M})},g=async()=>{const p=[...new Set(n.map(f=>f.assignedMechanicId).filter(Boolean))],A=await Promise.all(p.map(async f=>({id:f,user:await We(f)})));Pe(f=>{const v=new Map(f);return A.forEach(({id:M,user:V})=>{V&&v.set(M,V)}),v})};x(),g(),W(!1)});return()=>t()},[s]);const De=c.useCallback(async()=>{await new Promise(t=>setTimeout(t,500)),P(t=>t+1)},[]),L=c.useCallback(t=>{let n=t;if(m){const x=m.toLowerCase();n=n.filter(g=>{var M;const p=C.get(g.vehicleId),A=g.vehicleLicensePlate||(p==null?void 0:p.licensePlate)||"",f=g.vehicleBrand||(p==null?void 0:p.brand)||"",v=g.vehicleModel||(p==null?void 0:p.model)||"";return((M=g.jobNumber)==null?void 0:M.toLowerCase().includes(x))||g.customerName.toLowerCase().includes(x)||g.problemDescription.toLowerCase().includes(x)||A.toLowerCase().includes(x)||f.toLowerCase().includes(x)||v.toLowerCase().includes(x)})}return y!=="all"&&(n=n.filter(x=>x.status===y)),I!=="all"&&(n=n.filter(x=>x.priority===I)),F(n)},[m,y,I,C]),Te=c.useMemo(()=>L(S),[L,S]),u=rs(Te,20),ke=c.useCallback((t,n)=>{B(x=>{const g=new Set(x);return n?g.add(t):g.delete(t),g})},[]),Ae=c.useCallback(t=>{if(t){const n=u.paginatedItems.map(x=>x.id);B(new Set(n))}else B(new Set)},[u.paginatedItems]),ee=c.useCallback(()=>{X(t=>!t),B(new Set)},[]),ze=c.useCallback(async()=>{if(N.size!==0){Z(!0);try{const t=Array.from(N).map(n=>Ye(n));await Promise.all(t),ae.success(`Successfully deleted ${N.size} job${N.size>1?"s":""}`),B(new Set),X(!1)}catch(t){console.error("Error deleting jobs:",t),ae.error("Failed to delete some jobs")}finally{Z(!1),U(!1)}}},[N]),se=(s==null?void 0:s.role)==="mechanic",Je=(s==null?void 0:s.role)==="office_staff"||(s==null?void 0:s.role)==="admin"||(s==null?void 0:s.role)==="manager";return Se?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("p",{className:"text-muted-foreground",children:a("jobs.loadingJobs")})}):!i&&Je?e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold",children:a("nav.jobs")}),e.jsxs("p",{className:"text-muted-foreground",children:[S.length," total jobs"]})]}),e.jsx("div",{className:"flex items-center gap-3",children:E?e.jsxs(e.Fragment,{children:[e.jsxs(q,{variant:"secondary",className:"text-base px-4 py-2",children:[N.size," selected"]}),e.jsxs(k,{variant:"destructive",onClick:()=>U(!0),disabled:N.size===0,className:"gap-2",children:[e.jsx(Ue,{className:"h-4 w-4"}),a("jobs.deleteSelected")]}),e.jsxs(k,{variant:"outline",onClick:ee,className:"gap-2",children:[e.jsx(Ge,{className:"h-4 w-4"}),a("common.cancel")]})]}):e.jsxs(e.Fragment,{children:[e.jsxs(k,{variant:"outline",onClick:ee,className:"gap-2",children:[e.jsx(is,{className:"h-4 w-4"}),a("jobs.selectJobs")]}),e.jsxs(k,{size:"lg",onClick:()=>l("/jobs/new"),className:"gap-2",children:[e.jsx(ne,{className:"h-5 w-5"}),a("dashboard.createJob")]})]})})]}),e.jsxs("div",{className:"flex items-center gap-4 flex-wrap",children:[e.jsxs("div",{className:"relative flex-1 max-w-md",children:[e.jsx(he,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),e.jsx(le,{placeholder:a("jobs.searchPlaceholder"),value:m,onChange:t=>d(t.target.value),className:"pl-10"})]}),e.jsxs(ce,{value:y,onValueChange:w,children:[e.jsx(oe,{className:"w-[160px]",children:e.jsx(de,{placeholder:a("jobs.statusPlaceholder")})}),e.jsxs(me,{children:[e.jsx(D,{value:"all",children:a("jobs.allStatuses")}),e.jsx(D,{value:"not_started",children:a("jobs.notStarted")}),e.jsx(D,{value:"in_progress",children:a("jobs.inProgress")}),e.jsx(D,{value:"waiting_for_parts",children:a("jobs.waitingParts")}),e.jsx(D,{value:"completed",children:a("jobs.completed")})]})]}),e.jsxs(ce,{value:I,onValueChange:$,children:[e.jsx(oe,{className:"w-[140px]",children:e.jsx(de,{placeholder:a("jobs.priorityPlaceholder")})}),e.jsxs(me,{children:[e.jsx(D,{value:"all",children:a("jobs.allPriority")}),e.jsx(D,{value:"urgent",children:a("priority.urgent")}),e.jsx(D,{value:"normal",children:a("priority.normal")}),e.jsx(D,{value:"low",children:a("priority.low")})]})]}),e.jsxs("div",{className:"flex items-center border rounded-lg p-1",children:[e.jsx(k,{variant:b==="table"?"secondary":"ghost",size:"sm",onClick:()=>j("table"),children:e.jsx(ds,{className:"h-4 w-4"})}),e.jsx(k,{variant:b==="grid"?"secondary":"ghost",size:"sm",onClick:()=>j("grid"),children:e.jsx(cs,{className:"h-4 w-4"})})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(q,{variant:"secondary",children:[u.totalItems," jobs"]}),(y!=="all"||I!=="all"||m)&&e.jsx(k,{variant:"ghost",size:"sm",onClick:()=>{w("all"),$("all"),d("")},children:"Clear filters"})]}),b==="table"?e.jsxs(pe,{children:[e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-muted/50 border-b",children:e.jsxs("tr",{children:[E&&e.jsx("th",{className:"p-4 w-12",children:e.jsx(fe,{checked:u.paginatedItems.length>0&&u.paginatedItems.every(t=>N.has(t.id)),onCheckedChange:Ae})}),e.jsx("th",{className:"p-4 text-left font-medium text-sm",children:"Vehicle"}),e.jsx("th",{className:"p-4 text-left font-medium text-sm",children:"Problem"}),e.jsx("th",{className:"p-4 text-left font-medium text-sm",children:"Status"}),e.jsx("th",{className:"p-4 text-left font-medium text-sm",children:"Priority"}),e.jsx("th",{className:"p-4 text-left font-medium text-sm",children:"Assigned"}),e.jsx("th",{className:"p-4 text-left font-medium text-sm",children:"Created"})]})}),e.jsx("tbody",{children:u.paginatedItems.length>0?u.paginatedItems.map(t=>e.jsx(ps,{job:t,userId:s==null?void 0:s.id,userLanguage:r,vehicle:C.get(t.vehicleId),mechanic:t.assignedMechanicId?T.get(t.assignedMechanicId):void 0,userRole:s==null?void 0:s.role,isSelected:N.has(t.id),onSelect:ke,selectionMode:E},t.id)):e.jsx("tr",{children:e.jsx("td",{colSpan:E?7:6,className:"p-8 text-center text-muted-foreground",children:"No jobs found"})})})]})}),e.jsx("div",{className:"border-t px-4",children:e.jsx(ue,{currentPage:u.currentPage,totalPages:u.totalPages,totalItems:u.totalItems,pageSize:u.pageSize,onPageChange:u.onPageChange,onPageSizeChange:u.onPageSizeChange,pageSizeOptions:[10,20,50,100]})})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:u.paginatedItems.map(t=>e.jsx(z,{job:t,userId:s==null?void 0:s.id,userLanguage:r,vehicle:C.get(t.vehicleId),mechanic:t.assignedMechanicId?T.get(t.assignedMechanicId):void 0,userRole:s==null?void 0:s.role},t.id))}),e.jsx(ue,{currentPage:u.currentPage,totalPages:u.totalPages,totalItems:u.totalItems,pageSize:u.pageSize,onPageChange:u.onPageChange,onPageSizeChange:u.onPageSizeChange,pageSizeOptions:[12,24,48,96]})]}),e.jsx(Xe,{open:Me,onOpenChange:U,children:e.jsxs(Ze,{children:[e.jsxs(es,{children:[e.jsxs(ss,{children:["Delete ",N.size," Job",N.size>1?"s":"","?"]}),e.jsxs(ts,{children:["This action cannot be undone. This will permanently delete the selected job",N.size>1?"s":""," and all associated data including messages and activity logs."]})]}),e.jsxs(as,{children:[e.jsx(ns,{disabled:G,children:"Cancel"}),e.jsx(ls,{onClick:ze,disabled:G,className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",children:G?"Deleting...":`Delete ${N.size} Job${N.size>1?"s":""}`})]})]})})]}):e.jsxs(us,{onRefresh:De,className:"safe-top min-h-screen",children:[e.jsxs("div",{className:"px-4 pt-4 pb-2 flex items-center justify-between",children:[e.jsx("h1",{className:"text-2xl font-bold",children:a("nav.jobs")}),!se&&e.jsx(k,{size:"icon",onClick:()=>l("/jobs/new"),children:e.jsx(ne,{className:"h-5 w-5"})})]}),e.jsx("div",{className:"px-4 pb-4",children:e.jsxs("div",{className:"relative",children:[e.jsx(he,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),e.jsx(le,{placeholder:a("common.search"),value:m,onChange:t=>d(t.target.value),className:"pl-10"})]})}),se?e.jsxs(re,{defaultValue:o.get("tab")||"my-jobs",className:"px-4",children:[e.jsxs(ie,{className:"w-full grid grid-cols-2",children:[e.jsx(_,{value:"my-jobs",children:a("dashboard.myJobs")}),e.jsx(_,{value:"available",children:a("dashboard.availableJobs")})]}),e.jsx(R,{value:"my-jobs",className:"space-y-3 mt-4",children:L(J).length>0?L(J).map(t=>e.jsx(z,{job:t,userId:s==null?void 0:s.id,userLanguage:r,vehicle:C.get(t.vehicleId),mechanic:t.assignedMechanicId?T.get(t.assignedMechanicId):void 0,userRole:s==null?void 0:s.role},t.id)):e.jsx("p",{className:"text-center text-muted-foreground py-8",children:a("common.noData")})}),e.jsx(R,{value:"available",className:"space-y-3 mt-4",children:L(Q).length>0?L(Q).map(t=>e.jsx(z,{job:t,userId:s==null?void 0:s.id,userLanguage:r,vehicle:C.get(t.vehicleId),mechanic:t.assignedMechanicId?T.get(t.assignedMechanicId):void 0,userRole:s==null?void 0:s.role},t.id)):e.jsx("p",{className:"text-center text-muted-foreground py-8",children:a("common.noData")})})]}):e.jsxs(re,{defaultValue:"all",className:"px-4",children:[e.jsxs(ie,{className:"w-full grid grid-cols-4",children:[e.jsx(_,{value:"all",children:"All"}),e.jsx(_,{value:"active",children:a("jobs.inProgress")}),e.jsx(_,{value:"waiting",children:a("jobs.waitingParts")}),e.jsx(_,{value:"done",children:a("jobs.completed")})]}),e.jsx(R,{value:"all",className:"space-y-3 mt-4",children:(()=>{const t=F(S.filter(n=>n.status!=="completed"));return t.length>0?t.map(n=>e.jsx(z,{job:n,userId:s==null?void 0:s.id,userLanguage:r,vehicle:C.get(n.vehicleId),mechanic:n.assignedMechanicId?T.get(n.assignedMechanicId):void 0,userRole:s==null?void 0:s.role},n.id)):e.jsx("p",{className:"text-center text-muted-foreground py-8",children:a("common.noData")})})()}),e.jsx(R,{value:"active",className:"space-y-3 mt-4",children:(()=>{const t=F(S.filter(n=>n.status==="in_progress"||n.status==="waiting_for_parts"));return t.length>0?t.map(n=>e.jsx(z,{job:n,userId:s==null?void 0:s.id,userLanguage:r,vehicle:C.get(n.vehicleId),mechanic:n.assignedMechanicId?T.get(n.assignedMechanicId):void 0,userRole:s==null?void 0:s.role},n.id)):e.jsx("p",{className:"text-center text-muted-foreground py-8",children:a("common.noData")})})()}),e.jsx(R,{value:"waiting",className:"space-y-3 mt-4",children:(()=>{const t=F(S.filter(n=>n.status==="waiting_for_parts"));return t.length>0?t.map(n=>e.jsx(z,{job:n,userId:s==null?void 0:s.id,userLanguage:r,vehicle:C.get(n.vehicleId),mechanic:n.assignedMechanicId?T.get(n.assignedMechanicId):void 0,userRole:s==null?void 0:s.role},n.id)):e.jsx("p",{className:"text-center text-muted-foreground py-8",children:a("common.noData")})})()}),e.jsx(R,{value:"done",className:"space-y-3 mt-4",children:(()=>{const t=S.filter(n=>n.status==="completed").sort((n,x)=>{const g=n.completedAt?new Date(n.completedAt).getTime():0;return(x.completedAt?new Date(x.completedAt).getTime():0)-g});return t.length>0?t.map(n=>e.jsx(z,{job:n,userId:s==null?void 0:s.id,userLanguage:r,vehicle:C.get(n.vehicleId),mechanic:n.assignedMechanicId?T.get(n.assignedMechanicId):void 0,userRole:s==null?void 0:s.role},n.id)):e.jsx("p",{className:"text-center text-muted-foreground py-8",children:a("common.noData")})})()})]})]})}export{zs as default};
