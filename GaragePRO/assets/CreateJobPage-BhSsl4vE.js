import{c as Ze,Q as E,R as me,V as ms,W as Ks,Y as Vs,u as re,r as j,j as e,e as B,i as A,K as U,Z as ye,B as F,N as K,E as He,_ as z,$ as he,a0 as qs,a1 as Us,a2 as ks,a3 as Zs,a4 as te,a5 as Qs,a6 as Xs,a7 as et,a8 as st,P as tt,a9 as at,aa as ne,ab as oe,ac as le,ad as ie,ae as ce,af as rt,ag as nt,ah as ot,ai as Qe,aj as xe,ak as lt,a as O,al as hs,am as it,an as ct,ao as Xe,x as Cs,ap as dt,z as ut,f as Te,h as Fe,S as ae,aq as xs,O as mt,ar as ht,o as xt,d as ft,t as vt,X as pt,as as je,at as gt,au as bt,av as jt,aw as yt,ax as Nt,ay as wt,az as kt}from"./index-CNxWMcuV.js";import{u as Ms}from"./use-toast-C9pXjDz0.js";import{t as Ct}from"./jobTranslation-C42sppDK.js";import{L as Ce}from"./license-plate-BoT_Ewxe.js";import{C as Mt}from"./circle-check-big-a_8kXWWc.js";import{P as Ne}from"./phone-CnbjRpiL.js";import{H as _s}from"./history-n8JiAN2h.js";import{S as Me}from"./search-vDLcJ1l5.js";import{U as fs,M as _t}from"./user-check-YyTDvrUu.js";import{T as de}from"./triangle-alert-CHSZJu74.js";import{M as vs}from"./map-pin-CEelsx8N.js";import{D as Ds,a as Dt,b as Ss,c as Ps,d as Ls,e as St,f as Pt}from"./dialog-CIS6byhQ.js";import{S as ze,a as Je,b as Ge,c as Ke,d as we}from"./select-CbHlLrev.js";import{C as ps}from"./car-brand-logo-BjPA7wLP.js";import{G as es}from"./gauge-BGmypo8-.js";import{C as _e}from"./car-DWakAuoX.js";import{T as Lt}from"./textarea-D6buyuls.js";import{s as De,a as fe,d as X,b as It,c as ss,g as Ot,e as Tt,f as ee,i as Is}from"./format-DSNd7y_7.js";import{a as H,s as Ee}from"./subDays-C0x2vdMe.js";import{P as Ft,a as Et,b as Wt}from"./popover-Bn3nULpx.js";import{F as ts}from"./file-text-_cJWw5Fx.js";import{C as Se}from"./calendar-BxIrFUaJ.js";import{S as Bt}from"./settings-CBKaQ5jg.js";import{P as We}from"./pencil-BmBYV1qM.js";import{A as ue}from"./arrow-left-5j_RihUX.js";import{E as Rt}from"./eye-Dbr3NOu6.js";import"./googleTranslate-BIF2yF35.js";import"./chevron-down-n_8xVDCk.js";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ve=Ze("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const At=Ze("StickyNote",[["path",{d:"M16 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V8Z",key:"qazsjp"}],["path",{d:"M15 3v4a2 2 0 0 0 2 2h4",key:"40519r"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Os=Ze("UserCog",[["circle",{cx:"18",cy:"15",r:"3",key:"gjjjvw"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M10 15H6a4 4 0 0 0-4 4v2",key:"1nfge6"}],["path",{d:"m21.7 16.4-.9-.3",key:"12j9ji"}],["path",{d:"m15.2 13.9-.9-.3",key:"1fdjdi"}],["path",{d:"m16.6 18.7.3-.9",key:"heedtr"}],["path",{d:"m19.1 12.2.3-.9",key:"1af3ki"}],["path",{d:"m19.6 18.7-.4-1",key:"1x9vze"}],["path",{d:"m16.8 12.3-.4-1",key:"vqeiwj"}],["path",{d:"m14.3 16.6 1-.4",key:"1qlj63"}],["path",{d:"m20.7 13.8 1-.4",key:"1v5t8k"}]]);function V(s,t){const a=E(s);if(isNaN(t))return me(s,NaN);if(!t)return a;const n=a.getDate(),r=me(s,a.getTime());r.setMonth(a.getMonth()+t+1,0);const l=r.getDate();return n>=l?r:(a.setFullYear(r.getFullYear(),r.getMonth(),n),a)}function qe(s,t){const a=t*7;return H(s,a)}function $t(s,t){return V(s,t*12)}function Yt(s){let t;return s.forEach(function(a){const n=E(a);(t===void 0||t<n||isNaN(Number(n)))&&(t=n)}),t||new Date(NaN)}function Ht(s){let t;return s.forEach(a=>{const n=E(a);(!t||t>n||isNaN(+n))&&(t=n)}),t||new Date(NaN)}function J(s,t){const a=De(s),n=De(t);return+a==+n}function zt(s,t,a){const n=fe(s,a),r=fe(t,a),l=+n-ms(n),o=+r-ms(r);return Math.round((l-o)/Ks)}function G(s){const t=E(s);return t.setDate(1),t.setHours(0,0,0,0),t}function as(s,t){var i,c,m,u;const a=Vs(),n=(t==null?void 0:t.weekStartsOn)??((c=(i=t==null?void 0:t.locale)==null?void 0:i.options)==null?void 0:c.weekStartsOn)??a.weekStartsOn??((u=(m=a.locale)==null?void 0:m.options)==null?void 0:u.weekStartsOn)??0,r=E(s),l=r.getDay(),o=(l<n?-7:0)+6-(l-n);return r.setDate(r.getDate()+o),r.setHours(23,59,59,999),r}function Ts(s){return as(s,{weekStartsOn:1})}function Jt(s){const t=E(s),a=t.getFullYear(),n=t.getMonth(),r=me(s,0);return r.setFullYear(a,n+1,0),r.setHours(0,0,0,0),r.getDate()}function Gt(s){return Math.trunc(+E(s)/1e3)}function Kt(s){const t=E(s),a=t.getMonth();return t.setFullYear(t.getFullYear(),a+1,0),t.setHours(0,0,0,0),t}function Vt(s,t){return zt(Kt(s),G(s),t)+1}function Ue(s,t){const a=E(s),n=E(t);return a.getTime()>n.getTime()}function Fs(s,t){const a=E(s),n=E(t);return+a<+n}function rs(s,t){const a=E(s),n=E(t);return a.getFullYear()===n.getFullYear()&&a.getMonth()===n.getMonth()}function qt(s,t){const a=E(s),n=E(t);return a.getFullYear()===n.getFullYear()}function Be(s,t){const a=E(s),n=a.getFullYear(),r=a.getDate(),l=me(s,0);l.setFullYear(n,t,15),l.setHours(0,0,0,0);const o=Jt(l);return a.setMonth(t,Math.min(r,o)),a}function gs(s,t){const a=E(s);return isNaN(+a)?me(s,NaN):(a.setFullYear(t),a)}function Ut({formData:s,errors:t,onUpdate:a,selectedVehicle:n}){const{t:r}=re(),[l,o]=j.useState(""),[i,c]=j.useState(!1),[m,u]=j.useState([]),[x,d]=j.useState([]),[g,p]=j.useState(!1),[C,y]=j.useState(null),[h,M]=j.useState(null),[W,$]=j.useState(!1);j.useEffect(()=>{(async()=>{p(!0);try{const[_,I]=await Promise.all([qs(),Us()]);u(Array.isArray(_)?_:[]),d(Array.isArray(I)?I:[])}catch(_){console.error("Error loading customers:",_),u([]),d([])}finally{p(!1)}})()},[]),j.useEffect(()=>{(async()=>{if(!(!n||W)){if(n.customerId&&x.length>0){const _=x.find(I=>I.id===n.customerId);if(_){y(_),s.customerName||(a({customerName:_.name,customerPhone:_.phone,customerEmail:_.email||"",isReturningCustomer:!0}),$(!0));return}}try{const _=await ks(n.id);if(_.length>0){const T=_.sort((Y,Z)=>new Date(Z.createdAt).getTime()-new Date(Y.createdAt).getTime())[0];M({name:T.customerName,phone:T.customerPhone,email:T.customerEmail,jobCount:_.length,lastJobDate:T.createdAt}),s.customerName||(a({customerName:T.customerName,customerPhone:T.customerPhone,customerEmail:T.customerEmail||"",isReturningCustomer:!0}),$(!0))}}catch(_){console.error("Error loading vehicle history:",_)}}})()},[n,x]),j.useEffect(()=>{$(!1),y(null),M(null)},[n==null?void 0:n.id]);const f=j.useMemo(()=>{if(l.length<1)return[];if(!Array.isArray(x))return[];const N=l.toLowerCase().trim();return x.filter(_=>{var Z;const I=_.name.toLowerCase().includes(N),T=_.phone.replace(/\D/g,"").includes(N.replace(/\D/g,"")),Y=(Z=_.email)==null?void 0:Z.toLowerCase().includes(N);return I||T||Y}).sort((_,I)=>{const T=_.name.toLowerCase().startsWith(N),Y=I.name.toLowerCase().startsWith(N);return T&&!Y?-1:!T&&Y?1:0}).slice(0,5)},[l,x]),P=N=>{a({customerName:N.name,customerPhone:N.phone,customerEmail:N.email||"",customerId:N.id,isReturningCustomer:!0}),o(""),c(!1)};return e.jsxs("div",{className:"space-y-6 animate-fade-in",children:[e.jsxs("div",{className:"text-center mb-6",children:[e.jsx("h2",{className:"text-2xl font-bold mb-2",children:r("jobs.customer.title")}),e.jsx("p",{className:"text-muted-foreground",children:r("jobs.customer.subtitle")})]}),C&&n&&e.jsx(B,{className:"border-2 border-green-500/30 bg-green-50/50 dark:bg-green-950/20 shadow-lg animate-slide-down",children:e.jsx(A,{className:"pt-5 pb-5",children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"w-12 h-12 bg-green-500/20 rounded-xl flex items-center justify-center shrink-0",children:e.jsx(Mt,{className:"h-6 w-6 text-green-600"})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("p",{className:"text-sm font-bold text-green-700 dark:text-green-400",children:r("jobs.customer.found")}),e.jsx(U,{variant:"secondary",className:"bg-green-100 text-green-700 dark:bg-green-900/50 dark:text-green-400",children:r("jobs.customer.linkedVehicle")})]}),e.jsxs("div",{className:"bg-white/60 dark:bg-background/40 rounded-lg p-3 space-y-1",children:[e.jsx("p",{className:"font-semibold text-foreground",children:C.name}),e.jsxs("p",{className:"text-sm text-muted-foreground flex items-center gap-2",children:[e.jsx(Ne,{className:"h-3 w-3"})," ",C.phone]}),C.email&&e.jsxs("p",{className:"text-sm text-muted-foreground flex items-center gap-2",children:[e.jsx(ye,{className:"h-3 w-3"})," ",C.email]})]}),e.jsxs("div",{className:"flex items-center justify-between mt-3 flex-wrap gap-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ce,{plateNumber:n.licensePlate,size:"sm"}),e.jsxs("span",{className:"text-xs text-muted-foreground",children:[n.brand," ",n.model]})]}),e.jsx(F,{variant:"ghost",size:"sm",className:"text-xs h-7",onClick:()=>{y(null),$(!1),a({customerName:"",customerPhone:"",customerEmail:"",isReturningCustomer:!1})},children:r("jobs.customer.useDifferent")})]})]})]})})}),!C&&h&&n&&e.jsx(B,{className:"border-2 border-blue-500/30 bg-blue-50/50 dark:bg-blue-950/20 shadow-lg animate-slide-down",children:e.jsx(A,{className:"pt-5 pb-5",children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"w-12 h-12 bg-blue-500/20 rounded-xl flex items-center justify-center shrink-0",children:e.jsx(_s,{className:"h-6 w-6 text-blue-600"})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("p",{className:"text-sm font-bold text-blue-700 dark:text-blue-400",children:r("jobs.customer.foundHistory")}),e.jsxs(U,{variant:"secondary",className:"bg-blue-100 text-blue-700 dark:bg-blue-900/50 dark:text-blue-400",children:[h.jobCount," ",h.jobCount===1?r("jobs.customer.previousJob"):r("jobs.customer.previousJobs")]})]}),e.jsxs("div",{className:"bg-white/60 dark:bg-background/40 rounded-lg p-3 space-y-1",children:[e.jsx("p",{className:"font-semibold text-foreground",children:h.name}),e.jsxs("p",{className:"text-sm text-muted-foreground flex items-center gap-2",children:[e.jsx(Ne,{className:"h-3 w-3"})," ",h.phone]}),h.email&&e.jsxs("p",{className:"text-sm text-muted-foreground flex items-center gap-2",children:[e.jsx(ye,{className:"h-3 w-3"})," ",h.email]})]}),e.jsxs("div",{className:"flex items-center justify-between mt-3 flex-wrap gap-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ce,{plateNumber:n.licensePlate,size:"sm"}),e.jsxs("span",{className:"text-xs text-muted-foreground",children:[r("jobs.customer.lastServiced")," ",new Date(h.lastJobDate).toLocaleDateString("en-GB")]})]}),e.jsx(F,{variant:"ghost",size:"sm",className:"text-xs h-7",onClick:()=>{M(null),$(!1),a({customerName:"",customerPhone:"",customerEmail:"",isReturningCustomer:!1})},children:r("jobs.customer.useDifferent")})]})]})]})})}),e.jsxs(B,{className:"glass-light border-0 shadow-premium hover-lift overflow-hidden",children:[e.jsx("div",{className:"absolute inset-0 gradient-royal-radial opacity-5 pointer-events-none"}),e.jsxs(A,{className:"pt-6 relative",children:[e.jsxs("div",{className:"relative",children:[e.jsx(Me,{className:"absolute left-4 top-1/2 -translate-y-1/2 h-5 w-5 text-primary"}),e.jsx(K,{placeholder:r("jobs.customer.quickSearch"),value:l,onChange:N=>{o(N.target.value),c(!0)},onFocus:()=>c(!0),onBlur:()=>{setTimeout(()=>c(!1),200)},className:"h-14 pl-12 pr-10 text-base border-2 border-primary/20 focus:border-primary rounded-xl bg-background/50 backdrop-blur-sm"}),g&&e.jsx(He,{className:"absolute right-4 top-1/2 -translate-y-1/2 h-5 w-5 text-primary animate-spin"})]}),i&&l.length>=1&&e.jsx(e.Fragment,{children:f.length>0?e.jsx("div",{className:"mt-3 glass-strong rounded-xl divide-y divide-border/30 max-h-72 overflow-y-auto scrollbar-premium shadow-premium-lg animate-slide-down",children:f.map((N,_)=>{const I=(T,Y)=>T.split(new RegExp(`(${Y})`,"gi")).map((se,be)=>se.toLowerCase()===Y.toLowerCase()?e.jsx("span",{className:"bg-primary/20 text-primary font-semibold",children:se},be):se);return e.jsx("button",{type:"button",className:"w-full p-4 text-left hover:bg-primary/5 transition-all duration-200 flex items-center justify-between group",onClick:()=>P(N),children:e.jsxs("div",{className:"flex items-center gap-4 flex-1 min-w-0",children:[e.jsx("div",{className:"w-12 h-12 gradient-royal rounded-xl flex items-center justify-center shadow-glow group-hover:scale-110 transition-transform shrink-0",children:e.jsx(fs,{className:"h-6 w-6 text-white"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("p",{className:"font-semibold text-foreground group-hover:text-primary transition-colors truncate",children:I(N.name,l)}),N.complaints&&N.complaints.length>0&&e.jsxs(U,{variant:"secondary",className:"bg-amber-100 text-amber-700 dark:bg-amber-900/50 dark:text-amber-400 shrink-0",children:[e.jsx(de,{className:"h-3 w-3 mr-1"}),N.complaints.length]})]}),e.jsx("p",{className:"text-sm text-muted-foreground truncate",children:N.phone}),N.email&&e.jsx("p",{className:"text-xs text-muted-foreground truncate",children:N.email})]})]})},_)})}):e.jsxs("div",{className:"mt-3 p-6 glass-light rounded-xl text-center animate-fade-in",children:[e.jsx(Me,{className:"h-10 w-10 text-muted-foreground mx-auto mb-2 opacity-50"}),e.jsx("p",{className:"text-sm text-muted-foreground font-medium",children:r("jobs.customer.noCustomersFound")}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:r("jobs.customer.tryDifferent")})]})})]})]}),e.jsxs(B,{className:"glass-strong border-0 shadow-premium-lg overflow-hidden",children:[e.jsx("div",{className:"absolute inset-0 gradient-royal-radial opacity-5 pointer-events-none"}),e.jsxs(A,{className:"pt-6 space-y-5 relative",children:[s.isReturningCustomer&&e.jsxs("div",{className:"flex items-center gap-3 p-4 gradient-royal rounded-xl shadow-glow animate-bounce-subtle",children:[e.jsx(fs,{className:"h-5 w-5 text-white"}),e.jsx("span",{className:"text-sm font-semibold text-white",children:r("jobs.customer.returning")})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(z,{htmlFor:"customerName",className:"flex items-center gap-2 text-sm font-semibold",children:[e.jsx(he,{className:"h-4 w-4 text-primary"}),r("jobs.customerName")," *"]}),e.jsx(K,{id:"customerName",value:s.customerName,onChange:N=>a({customerName:N.target.value}),placeholder:"John Doe",className:`h-14 text-base rounded-xl border-2 transition-all ${t.customerName?"border-destructive focus:border-destructive":"border-border/30 focus:border-primary"}`}),t.customerName&&e.jsxs("p",{className:"text-sm text-destructive flex items-center gap-1",children:[e.jsx("span",{className:"text-lg",children:"⚠"})," ",t.customerName]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(z,{htmlFor:"customerPhone",className:"flex items-center gap-2 text-sm font-semibold",children:[e.jsx(Ne,{className:"h-4 w-4 text-primary"}),r("jobs.customerPhone")," *"]}),e.jsx(K,{id:"customerPhone",type:"tel",value:s.customerPhone,onChange:N=>a({customerPhone:N.target.value}),placeholder:"+1 234 567 890",className:`h-14 text-base rounded-xl border-2 transition-all ${t.customerPhone?"border-destructive focus:border-destructive":"border-border/30 focus:border-primary"}`}),t.customerPhone&&e.jsxs("p",{className:"text-sm text-destructive flex items-center gap-1",children:[e.jsx("span",{className:"text-lg",children:"⚠"})," ",t.customerPhone]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(z,{htmlFor:"customerEmail",className:"flex items-center gap-2 text-sm font-semibold",children:[e.jsx(ye,{className:"h-4 w-4 text-primary"}),r("jobs.customer.emailOptional")]}),e.jsx(K,{id:"customerEmail",type:"email",value:s.customerEmail,onChange:N=>a({customerEmail:N.target.value}),placeholder:"john@example.com",className:`h-14 rounded-xl border-2 transition-all ${t.customerEmail?"border-destructive focus:border-destructive":"border-border/30 focus:border-primary"}`}),t.customerEmail&&e.jsxs("p",{className:"text-sm text-destructive flex items-center gap-1",children:[e.jsx("span",{className:"text-lg",children:"⚠"})," ",t.customerEmail]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs(z,{htmlFor:"customerPostCode",className:"flex items-center gap-2 text-sm font-semibold",children:[e.jsx(vs,{className:"h-4 w-4 text-primary"}),r("jobs.customer.postCodeOptional")]}),e.jsx(K,{id:"customerPostCode",value:s.customerPostCode,onChange:N=>a({customerPostCode:N.target.value}),placeholder:"20260",className:"h-14 rounded-xl border-2 border-border/30 focus:border-primary transition-all"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(z,{htmlFor:"customerRegion",className:"flex items-center gap-2 text-sm font-semibold",children:[e.jsx(vs,{className:"h-4 w-4 text-primary"}),r("jobs.customer.regionOptional")]}),e.jsx(K,{id:"customerRegion",value:s.customerRegion,onChange:N=>a({customerRegion:N.target.value}),placeholder:"CALVI",className:"h-14 rounded-xl border-2 border-border/30 focus:border-primary transition-all"})]})]})]})]})]})}const Zt=[{value:"petrol",label:"Petrol"},{value:"diesel",label:"Diesel"},{value:"electric",label:"Electric"},{value:"hybrid",label:"Hybrid"},{value:"lpg",label:"LPG"},{value:"other",label:"Other"}],Qt=Zs({brand:te().min(1,"Brand is required"),model:te().optional(),year:Qs.number().min(1900).max(new Date().getFullYear()+1).optional().or(Xs("")),licensePlate:te().min(1,"License plate is required"),vin:te().optional(),color:te().optional(),fuelType:te().optional(),customerId:te().optional()});function Xt({formData:s,selectedVehicle:t,error:a,onVehicleSelect:n,onClearVehicle:r,onUpdate:l}){const{t:o}=re(),{toast:i}=Ms(),[c,m]=j.useState([]),[u,x]=j.useState(""),[d,g]=j.useState(!1),[p,C]=j.useState(!0),[y,h]=j.useState(new Map);j.useEffect(()=>{(async()=>{C(!0);try{const P=await rt();m(P);const N=new Map;await Promise.all(P.map(async _=>{const I=await ks(_.id);N.set(_.id,I.length)})),h(N)}catch(P){console.error("Error loading vehicles:",P),i({variant:"destructive",title:"Error",description:"Failed to load vehicles"})}finally{C(!1)}})()},[i]);const M=et({resolver:st(Qt),defaultValues:{brand:"",model:"",year:new Date().getFullYear(),licensePlate:"",vin:"",color:"",fuelType:""}}),W=c.filter(f=>{var P,N;return f.licensePlate.toLowerCase().includes(u.toLowerCase())||f.brand.toLowerCase().includes(u.toLowerCase())||((P=f.model)==null?void 0:P.toLowerCase().includes(u.toLowerCase()))||((N=f.vin)==null?void 0:N.toLowerCase().includes(u.toLowerCase()))}),$=async f=>{if(await nt(f.licensePlate)){M.setError("licensePlate",{message:"License plate already exists"});return}const N={brand:f.brand,licensePlate:f.licensePlate.toUpperCase()};f.model&&(N.model=f.model),f.year&&(N.year=f.year),f.vin&&(N.vin=f.vin.toUpperCase()),f.color&&(N.color=f.color),f.fuelType&&(N.fuelType=f.fuelType),f.customerId&&(N.customerId=f.customerId);const _=await ot(N),I={id:_,...N,createdAt:new Date().toISOString()};m([...c,I]),h(new Map(y).set(_,0)),n(I),g(!1),M.reset(),i({title:"Vehicle added",description:`${f.brand} ${f.model} has been added`})};return p?e.jsx("div",{className:"space-y-6 animate-fade-in",children:e.jsx("div",{className:"text-center py-16",children:e.jsx("p",{className:"text-muted-foreground text-lg",children:"Loading vehicles..."})})}):e.jsxs("div",{className:"space-y-6 animate-fade-in",children:[e.jsxs("div",{className:"text-center mb-6",children:[e.jsx("h2",{className:"text-2xl font-bold mb-2",children:o("jobs.vehicleInfo")}),e.jsx("p",{className:"text-muted-foreground",children:o("jobs.vehicle.searchSubtitle")})]}),t?e.jsxs("div",{className:"space-y-4",children:[e.jsxs(B,{className:"glass-strong border-2 border-primary shadow-premium-lg overflow-hidden animate-scale-in",children:[e.jsx("div",{className:"absolute inset-0 gradient-royal-radial opacity-10 pointer-events-none"}),e.jsxs(A,{className:"pt-6 relative",children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-16 h-16 flex items-center justify-center shrink-0",children:e.jsx(ps,{brand:t.brand,size:"xl",className:"text-primary"})}),e.jsxs("div",{children:[e.jsx(Ce,{plateNumber:t.licensePlate,size:"lg"}),e.jsxs("p",{className:"text-lg font-bold text-gradient-royal mt-2",children:[t.brand," ",t.model]}),e.jsxs("p",{className:"text-muted-foreground font-medium text-sm",children:[t.year,t.fuelType&&` • ${t.fuelType.charAt(0).toUpperCase()+t.fuelType.slice(1)}`]}),t.vin&&e.jsxs("p",{className:"text-xs text-muted-foreground mt-1 font-mono bg-muted/50 px-2 py-1 rounded inline-block",children:["VIN: ",t.vin]})]})]}),e.jsx(F,{variant:"outline",size:"sm",onClick:r,className:"hover:bg-primary/10 hover:text-primary hover:border-primary transition-all",children:o("jobs.vehicle.change")})]}),(y.get(t.id)||0)>0&&e.jsxs("div",{className:"mt-4 flex items-center gap-2 p-4 glass-light rounded-xl border-l-4 border-l-gold animate-slide-up",children:[e.jsx(_s,{className:"h-5 w-5 text-gold"}),e.jsxs("span",{className:"text-sm",children:[e.jsx(U,{className:"mr-2 bg-gold/20 text-gold-foreground border-gold/30",children:o("jobs.vehicle.previousJobs").replace("{count}",String(y.get(t.id)||0))}),e.jsx("span",{className:"text-muted-foreground font-medium",children:o("jobs.vehicle.onThisVehicle")})]})]})]})]}),e.jsxs(B,{className:"glass-light border-0 shadow-premium hover-lift overflow-hidden",children:[e.jsx("div",{className:"absolute inset-0 gradient-royal-radial opacity-5 pointer-events-none"}),e.jsx(A,{className:"pt-6 relative",children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs(z,{htmlFor:"mileage",className:"flex items-center gap-2 text-sm font-semibold",children:[e.jsx(es,{className:"h-4 w-4 text-primary"}),o("jobs.vehicle.currentKm")]}),e.jsx(K,{id:"mileage",type:"number",value:s.mileage,onChange:f=>l({mileage:f.target.value}),placeholder:o("jobs.vehicle.kmPlaceholder"),className:"h-14 text-base rounded-xl border-2 border-border/30 focus:border-primary transition-all"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:o("jobs.vehicle.kmHelp")})]})})]})]}):e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx(Me,{className:"absolute left-4 top-1/2 -translate-y-1/2 h-5 w-5 text-primary"}),e.jsx(K,{placeholder:o("jobs.vehicle.searchPlaceholder"),value:u,onChange:f=>x(f.target.value),className:`h-16 pl-12 text-base rounded-xl border-2 transition-all ${a?"border-destructive focus:border-destructive":"border-primary/20 focus:border-primary"}`})]}),a&&e.jsxs("p",{className:"text-sm text-destructive flex items-center gap-1",children:[e.jsx("span",{className:"text-lg",children:"⚠"})," ",a]}),u&&W.length>0&&e.jsx(B,{className:"glass-strong border-0 shadow-premium-lg overflow-hidden animate-slide-down",children:e.jsx(A,{className:"p-0 divide-y divide-border/30 max-h-80 overflow-y-auto scrollbar-premium",children:W.map(f=>{const P=y.get(f.id)||0;return e.jsxs("button",{type:"button",className:"w-full p-4 text-left hover:bg-primary/5 transition-all duration-200 flex items-center justify-between group",onClick:()=>{n(f),x("")},children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-12 h-12 flex items-center justify-center group-hover:scale-110 transition-transform shrink-0",children:e.jsx(ps,{brand:f.brand,size:"lg",className:"text-primary"})}),e.jsxs("div",{children:[e.jsx(Ce,{plateNumber:f.licensePlate,size:"md",className:"mb-1"}),e.jsxs("p",{className:"font-semibold text-foreground group-hover:text-primary transition-colors",children:[f.brand," ",f.model]}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:[f.year,f.fuelType&&` • ${f.fuelType.charAt(0).toUpperCase()+f.fuelType.slice(1)}`]})]})]}),P>0&&e.jsxs(U,{className:"bg-gold/10 text-gold-foreground border-gold/30 shrink-0",children:[P," jobs"]})]},f.id)})})}),u&&W.length===0&&e.jsx(B,{className:"glass-light border-2 border-dashed border-border/50 shadow-premium animate-fade-in",children:e.jsxs(A,{className:"py-12 text-center",children:[e.jsx(_e,{className:"h-12 w-12 text-muted-foreground mx-auto mb-3 opacity-50"}),e.jsx("p",{className:"text-muted-foreground font-medium",children:"No vehicles found"})]})}),e.jsxs(Ds,{open:d,onOpenChange:g,children:[e.jsx(Dt,{asChild:!0,children:e.jsxs(F,{className:"w-full h-16 text-base gradient-royal hover:shadow-glow transition-all font-semibold",children:[e.jsx(tt,{className:"mr-2 h-5 w-5"}),o("jobs.addVehicle")]})}),e.jsxs(Ss,{className:"max-h-[90vh] overflow-y-auto",children:[e.jsx(Ps,{children:e.jsx(Ls,{children:o("jobs.addVehicle")})}),e.jsx(at,{...M,children:e.jsxs("form",{onSubmit:M.handleSubmit($),className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(ne,{control:M.control,name:"brand",render:({field:f})=>e.jsxs(oe,{children:[e.jsxs(le,{children:[o("vehicle.brand")," *"]}),e.jsx(ie,{children:e.jsx(K,{...f,placeholder:"Toyota"})}),e.jsx(ce,{})]})}),e.jsx(ne,{control:M.control,name:"model",render:({field:f})=>e.jsxs(oe,{children:[e.jsx(le,{children:o("vehicle.model")}),e.jsx(ie,{children:e.jsx(K,{...f,placeholder:"Camry"})}),e.jsx(ce,{})]})})]}),e.jsx(ne,{control:M.control,name:"year",render:({field:f})=>e.jsxs(oe,{children:[e.jsx(le,{children:o("vehicle.year")}),e.jsx(ie,{children:e.jsx(K,{...f,type:"number",placeholder:"2023",value:f.value||""})}),e.jsx(ce,{})]})}),e.jsx(ne,{control:M.control,name:"licensePlate",render:({field:f})=>e.jsxs(oe,{children:[e.jsxs(le,{children:[o("vehicle.licensePlate")," *"]}),e.jsx(ie,{children:e.jsx(K,{...f,placeholder:"ABC-1234",className:"uppercase"})}),e.jsx(ce,{})]})}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(ne,{control:M.control,name:"vin",render:({field:f})=>e.jsxs(oe,{children:[e.jsx(le,{children:"VIN (optional)"}),e.jsx(ie,{children:e.jsx(K,{...f,placeholder:"1HGCM82633A123456",className:"uppercase"})}),e.jsx(ce,{})]})}),e.jsx(ne,{control:M.control,name:"fuelType",render:({field:f})=>e.jsxs(oe,{children:[e.jsx(le,{children:"Fuel Type (optional)"}),e.jsxs(ze,{onValueChange:f.onChange,defaultValue:f.value,children:[e.jsx(ie,{children:e.jsx(Je,{children:e.jsx(Ge,{placeholder:"Select fuel type"})})}),e.jsx(Ke,{children:Zt.map(P=>e.jsx(we,{value:P.value,children:P.label},P.value))})]}),e.jsx(ce,{})]})})]}),e.jsx(F,{type:"submit",className:"w-full",children:o("common.save")})]})})]})]})]})]})}var w=function(){return w=Object.assign||function(t){for(var a,n=1,r=arguments.length;n<r;n++){a=arguments[n];for(var l in a)Object.prototype.hasOwnProperty.call(a,l)&&(t[l]=a[l])}return t},w.apply(this,arguments)};function ea(s,t){var a={};for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&t.indexOf(n)<0&&(a[n]=s[n]);if(s!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,n=Object.getOwnPropertySymbols(s);r<n.length;r++)t.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(s,n[r])&&(a[n[r]]=s[n[r]]);return a}function Es(s,t,a){for(var n=0,r=t.length,l;n<r;n++)(l||!(n in t))&&(l||(l=Array.prototype.slice.call(t,0,n)),l[n]=t[n]);return s.concat(l||Array.prototype.slice.call(t))}function ve(s){return s.mode==="multiple"}function pe(s){return s.mode==="range"}function Le(s){return s.mode==="single"}var sa={root:"rdp",multiple_months:"rdp-multiple_months",with_weeknumber:"rdp-with_weeknumber",vhidden:"rdp-vhidden",button_reset:"rdp-button_reset",button:"rdp-button",caption:"rdp-caption",caption_start:"rdp-caption_start",caption_end:"rdp-caption_end",caption_between:"rdp-caption_between",caption_label:"rdp-caption_label",caption_dropdowns:"rdp-caption_dropdowns",dropdown:"rdp-dropdown",dropdown_month:"rdp-dropdown_month",dropdown_year:"rdp-dropdown_year",dropdown_icon:"rdp-dropdown_icon",months:"rdp-months",month:"rdp-month",table:"rdp-table",tbody:"rdp-tbody",tfoot:"rdp-tfoot",head:"rdp-head",head_row:"rdp-head_row",head_cell:"rdp-head_cell",nav:"rdp-nav",nav_button:"rdp-nav_button",nav_button_previous:"rdp-nav_button_previous",nav_button_next:"rdp-nav_button_next",nav_icon:"rdp-nav_icon",row:"rdp-row",weeknumber:"rdp-weeknumber",cell:"rdp-cell",day:"rdp-day",day_today:"rdp-day_today",day_outside:"rdp-day_outside",day_selected:"rdp-day_selected",day_disabled:"rdp-day_disabled",day_hidden:"rdp-day_hidden",day_range_start:"rdp-day_range_start",day_range_end:"rdp-day_range_end",day_range_middle:"rdp-day_range_middle"};function ta(s,t){return ee(s,"LLLL y",t)}function aa(s,t){return ee(s,"d",t)}function ra(s,t){return ee(s,"LLLL",t)}function na(s){return"".concat(s)}function oa(s,t){return ee(s,"cccccc",t)}function la(s,t){return ee(s,"yyyy",t)}var ia=Object.freeze({__proto__:null,formatCaption:ta,formatDay:aa,formatMonthCaption:ra,formatWeekNumber:na,formatWeekdayName:oa,formatYearCaption:la}),ca=function(s,t,a){return ee(s,"do MMMM (EEEE)",a)},da=function(){return"Month: "},ua=function(){return"Go to next month"},ma=function(){return"Go to previous month"},ha=function(s,t){return ee(s,"cccc",t)},xa=function(s){return"Week n. ".concat(s)},fa=function(){return"Year: "},va=Object.freeze({__proto__:null,labelDay:ca,labelMonthDropdown:da,labelNext:ua,labelPrevious:ma,labelWeekNumber:xa,labelWeekday:ha,labelYearDropdown:fa});function pa(){var s="buttons",t=sa,a=lt,n={},r={},l=1,o={},i=new Date;return{captionLayout:s,classNames:t,formatters:ia,labels:va,locale:a,modifiersClassNames:n,modifiers:r,numberOfMonths:l,styles:o,today:i,mode:"default"}}function ga(s){var t=s.fromYear,a=s.toYear,n=s.fromMonth,r=s.toMonth,l=s.fromDate,o=s.toDate;return n?l=G(n):t&&(l=new Date(t,0,1)),r?o=Qe(r):a&&(o=new Date(a,11,31)),{fromDate:l?De(l):void 0,toDate:o?De(o):void 0}}var Ws=j.createContext(void 0);function ba(s){var t,a=s.initialProps,n=pa(),r=ga(a),l=r.fromDate,o=r.toDate,i=(t=a.captionLayout)!==null&&t!==void 0?t:n.captionLayout;i!=="buttons"&&(!l||!o)&&(i="buttons");var c;(Le(a)||ve(a)||pe(a))&&(c=a.onSelect);var m=w(w(w({},n),a),{captionLayout:i,classNames:w(w({},n.classNames),a.classNames),components:w({},a.components),formatters:w(w({},n.formatters),a.formatters),fromDate:l,labels:w(w({},n.labels),a.labels),mode:a.mode||n.mode,modifiers:w(w({},n.modifiers),a.modifiers),modifiersClassNames:w(w({},n.modifiersClassNames),a.modifiersClassNames),onSelect:c,styles:w(w({},n.styles),a.styles),toDate:o});return e.jsx(Ws.Provider,{value:m,children:s.children})}function S(){var s=j.useContext(Ws);if(!s)throw new Error("useDayPicker must be used within a DayPickerProvider.");return s}function Bs(s){var t=S(),a=t.locale,n=t.classNames,r=t.styles,l=t.formatters.formatCaption;return e.jsx("div",{className:n.caption_label,style:r.caption_label,"aria-live":"polite",role:"presentation",id:s.id,children:l(s.displayMonth,{locale:a})})}function ja(s){return e.jsx("svg",w({width:"8px",height:"8px",viewBox:"0 0 120 120","data-testid":"iconDropdown"},s,{children:e.jsx("path",{d:"M4.22182541,48.2218254 C8.44222828,44.0014225 15.2388494,43.9273804 19.5496459,47.9996989 L19.7781746,48.2218254 L60,88.443 L100.221825,48.2218254 C104.442228,44.0014225 111.238849,43.9273804 115.549646,47.9996989 L115.778175,48.2218254 C119.998577,52.4422283 120.07262,59.2388494 116.000301,63.5496459 L115.778175,63.7781746 L67.7781746,111.778175 C63.5577717,115.998577 56.7611506,116.07262 52.4503541,112.000301 L52.2218254,111.778175 L4.22182541,63.7781746 C-0.0739418023,59.4824074 -0.0739418023,52.5175926 4.22182541,48.2218254 Z",fill:"currentColor",fillRule:"nonzero"})}))}function Rs(s){var t,a,n=s.onChange,r=s.value,l=s.children,o=s.caption,i=s.className,c=s.style,m=S(),u=(a=(t=m.components)===null||t===void 0?void 0:t.IconDropdown)!==null&&a!==void 0?a:ja;return e.jsxs("div",{className:i,style:c,children:[e.jsx("span",{className:m.classNames.vhidden,children:s["aria-label"]}),e.jsx("select",{name:s.name,"aria-label":s["aria-label"],className:m.classNames.dropdown,style:m.styles.dropdown,value:r,onChange:n,children:l}),e.jsxs("div",{className:m.classNames.caption_label,style:m.styles.caption_label,"aria-hidden":"true",children:[o,e.jsx(u,{className:m.classNames.dropdown_icon,style:m.styles.dropdown_icon})]})]})}function ya(s){var t,a=S(),n=a.fromDate,r=a.toDate,l=a.styles,o=a.locale,i=a.formatters.formatMonthCaption,c=a.classNames,m=a.components,u=a.labels.labelMonthDropdown;if(!n)return e.jsx(e.Fragment,{});if(!r)return e.jsx(e.Fragment,{});var x=[];if(qt(n,r))for(var d=G(n),g=n.getMonth();g<=r.getMonth();g++)x.push(Be(d,g));else for(var d=G(new Date),g=0;g<=11;g++)x.push(Be(d,g));var p=function(y){var h=Number(y.target.value),M=Be(G(s.displayMonth),h);s.onChange(M)},C=(t=m==null?void 0:m.Dropdown)!==null&&t!==void 0?t:Rs;return e.jsx(C,{name:"months","aria-label":u(),className:c.dropdown_month,style:l.dropdown_month,onChange:p,value:s.displayMonth.getMonth(),caption:i(s.displayMonth,{locale:o}),children:x.map(function(y){return e.jsx("option",{value:y.getMonth(),children:i(y,{locale:o})},y.getMonth())})})}function Na(s){var t,a=s.displayMonth,n=S(),r=n.fromDate,l=n.toDate,o=n.locale,i=n.styles,c=n.classNames,m=n.components,u=n.formatters.formatYearCaption,x=n.labels.labelYearDropdown,d=[];if(!r)return e.jsx(e.Fragment,{});if(!l)return e.jsx(e.Fragment,{});for(var g=r.getFullYear(),p=l.getFullYear(),C=g;C<=p;C++)d.push(gs(It(new Date),C));var y=function(M){var W=gs(G(a),Number(M.target.value));s.onChange(W)},h=(t=m==null?void 0:m.Dropdown)!==null&&t!==void 0?t:Rs;return e.jsx(h,{name:"years","aria-label":x(),className:c.dropdown_year,style:i.dropdown_year,onChange:y,value:a.getFullYear(),caption:u(a,{locale:o}),children:d.map(function(M){return e.jsx("option",{value:M.getFullYear(),children:u(M,{locale:o})},M.getFullYear())})})}function wa(s,t){var a=j.useState(s),n=a[0],r=a[1],l=t===void 0?n:t;return[l,r]}function ka(s){var t=s.month,a=s.defaultMonth,n=s.today,r=t||a||n||new Date,l=s.toDate,o=s.fromDate,i=s.numberOfMonths,c=i===void 0?1:i;if(l&&xe(l,r)<0){var m=-1*(c-1);r=V(l,m)}return o&&xe(r,o)<0&&(r=o),G(r)}function Ca(){var s=S(),t=ka(s),a=wa(t,s.month),n=a[0],r=a[1],l=function(o){var i;if(!s.disableNavigation){var c=G(o);r(c),(i=s.onMonthChange)===null||i===void 0||i.call(s,c)}};return[n,l]}function Ma(s,t){for(var a=t.reverseMonths,n=t.numberOfMonths,r=G(s),l=G(V(r,n)),o=xe(l,r),i=[],c=0;c<o;c++){var m=V(r,c);i.push(m)}return a&&(i=i.reverse()),i}function _a(s,t){if(!t.disableNavigation){var a=t.toDate,n=t.pagedNavigation,r=t.numberOfMonths,l=r===void 0?1:r,o=n?l:1,i=G(s);if(!a)return V(i,o);var c=xe(a,s);if(!(c<l))return V(i,o)}}function Da(s,t){if(!t.disableNavigation){var a=t.fromDate,n=t.pagedNavigation,r=t.numberOfMonths,l=r===void 0?1:r,o=n?l:1,i=G(s);if(!a)return V(i,-o);var c=xe(i,a);if(!(c<=0))return V(i,-o)}}var As=j.createContext(void 0);function Sa(s){var t=S(),a=Ca(),n=a[0],r=a[1],l=Ma(n,t),o=_a(n,t),i=Da(n,t),c=function(x){return l.some(function(d){return rs(x,d)})},m=function(x,d){c(x)||(d&&Fs(x,d)?r(V(x,1+t.numberOfMonths*-1)):r(x))},u={currentMonth:n,displayMonths:l,goToMonth:r,goToDate:m,previousMonth:i,nextMonth:o,isDateDisplayed:c};return e.jsx(As.Provider,{value:u,children:s.children})}function ge(){var s=j.useContext(As);if(!s)throw new Error("useNavigation must be used within a NavigationProvider");return s}function bs(s){var t,a=S(),n=a.classNames,r=a.styles,l=a.components,o=ge().goToMonth,i=function(u){o(V(u,s.displayIndex?-s.displayIndex:0))},c=(t=l==null?void 0:l.CaptionLabel)!==null&&t!==void 0?t:Bs,m=e.jsx(c,{id:s.id,displayMonth:s.displayMonth});return e.jsxs("div",{className:n.caption_dropdowns,style:r.caption_dropdowns,children:[e.jsx("div",{className:n.vhidden,children:m}),e.jsx(ya,{onChange:i,displayMonth:s.displayMonth}),e.jsx(Na,{onChange:i,displayMonth:s.displayMonth})]})}function Pa(s){return e.jsx("svg",w({width:"16px",height:"16px",viewBox:"0 0 120 120"},s,{children:e.jsx("path",{d:"M69.490332,3.34314575 C72.6145263,0.218951416 77.6798462,0.218951416 80.8040405,3.34314575 C83.8617626,6.40086786 83.9268205,11.3179931 80.9992143,14.4548388 L80.8040405,14.6568542 L35.461,60 L80.8040405,105.343146 C83.8617626,108.400868 83.9268205,113.317993 80.9992143,116.454839 L80.8040405,116.656854 C77.7463184,119.714576 72.8291931,119.779634 69.6923475,116.852028 L69.490332,116.656854 L18.490332,65.6568542 C15.4326099,62.5991321 15.367552,57.6820069 18.2951583,54.5451612 L18.490332,54.3431458 L69.490332,3.34314575 Z",fill:"currentColor",fillRule:"nonzero"})}))}function La(s){return e.jsx("svg",w({width:"16px",height:"16px",viewBox:"0 0 120 120"},s,{children:e.jsx("path",{d:"M49.8040405,3.34314575 C46.6798462,0.218951416 41.6145263,0.218951416 38.490332,3.34314575 C35.4326099,6.40086786 35.367552,11.3179931 38.2951583,14.4548388 L38.490332,14.6568542 L83.8333725,60 L38.490332,105.343146 C35.4326099,108.400868 35.367552,113.317993 38.2951583,116.454839 L38.490332,116.656854 C41.5480541,119.714576 46.4651794,119.779634 49.602025,116.852028 L49.8040405,116.656854 L100.804041,65.6568542 C103.861763,62.5991321 103.926821,57.6820069 100.999214,54.5451612 L100.804041,54.3431458 L49.8040405,3.34314575 Z",fill:"currentColor"})}))}var Pe=j.forwardRef(function(s,t){var a=S(),n=a.classNames,r=a.styles,l=[n.button_reset,n.button];s.className&&l.push(s.className);var o=l.join(" "),i=w(w({},r.button_reset),r.button);return s.style&&Object.assign(i,s.style),e.jsx("button",w({},s,{ref:t,type:"button",className:o,style:i}))});function Ia(s){var t,a,n=S(),r=n.dir,l=n.locale,o=n.classNames,i=n.styles,c=n.labels,m=c.labelPrevious,u=c.labelNext,x=n.components;if(!s.nextMonth&&!s.previousMonth)return e.jsx(e.Fragment,{});var d=m(s.previousMonth,{locale:l}),g=[o.nav_button,o.nav_button_previous].join(" "),p=u(s.nextMonth,{locale:l}),C=[o.nav_button,o.nav_button_next].join(" "),y=(t=x==null?void 0:x.IconRight)!==null&&t!==void 0?t:La,h=(a=x==null?void 0:x.IconLeft)!==null&&a!==void 0?a:Pa;return e.jsxs("div",{className:o.nav,style:i.nav,children:[!s.hidePrevious&&e.jsx(Pe,{name:"previous-month","aria-label":d,className:g,style:i.nav_button_previous,disabled:!s.previousMonth,onClick:s.onPreviousClick,children:r==="rtl"?e.jsx(y,{className:o.nav_icon,style:i.nav_icon}):e.jsx(h,{className:o.nav_icon,style:i.nav_icon})}),!s.hideNext&&e.jsx(Pe,{name:"next-month","aria-label":p,className:C,style:i.nav_button_next,disabled:!s.nextMonth,onClick:s.onNextClick,children:r==="rtl"?e.jsx(h,{className:o.nav_icon,style:i.nav_icon}):e.jsx(y,{className:o.nav_icon,style:i.nav_icon})})]})}function js(s){var t=S().numberOfMonths,a=ge(),n=a.previousMonth,r=a.nextMonth,l=a.goToMonth,o=a.displayMonths,i=o.findIndex(function(p){return rs(s.displayMonth,p)}),c=i===0,m=i===o.length-1,u=t>1&&(c||!m),x=t>1&&(m||!c),d=function(){n&&l(n)},g=function(){r&&l(r)};return e.jsx(Ia,{displayMonth:s.displayMonth,hideNext:u,hidePrevious:x,nextMonth:r,previousMonth:n,onPreviousClick:d,onNextClick:g})}function Oa(s){var t,a=S(),n=a.classNames,r=a.disableNavigation,l=a.styles,o=a.captionLayout,i=a.components,c=(t=i==null?void 0:i.CaptionLabel)!==null&&t!==void 0?t:Bs,m;return r?m=e.jsx(c,{id:s.id,displayMonth:s.displayMonth}):o==="dropdown"?m=e.jsx(bs,{displayMonth:s.displayMonth,id:s.id}):o==="dropdown-buttons"?m=e.jsxs(e.Fragment,{children:[e.jsx(bs,{displayMonth:s.displayMonth,displayIndex:s.displayIndex,id:s.id}),e.jsx(js,{displayMonth:s.displayMonth,displayIndex:s.displayIndex,id:s.id})]}):m=e.jsxs(e.Fragment,{children:[e.jsx(c,{id:s.id,displayMonth:s.displayMonth,displayIndex:s.displayIndex}),e.jsx(js,{displayMonth:s.displayMonth,id:s.id})]}),e.jsx("div",{className:n.caption,style:l.caption,children:m})}function Ta(s){var t=S(),a=t.footer,n=t.styles,r=t.classNames.tfoot;return a?e.jsx("tfoot",{className:r,style:n.tfoot,children:e.jsx("tr",{children:e.jsx("td",{colSpan:8,children:a})})}):e.jsx(e.Fragment,{})}function Fa(s,t,a){for(var n=a?ss(new Date):fe(new Date,{locale:s,weekStartsOn:t}),r=[],l=0;l<7;l++){var o=H(n,l);r.push(o)}return r}function Ea(){var s=S(),t=s.classNames,a=s.styles,n=s.showWeekNumber,r=s.locale,l=s.weekStartsOn,o=s.ISOWeek,i=s.formatters.formatWeekdayName,c=s.labels.labelWeekday,m=Fa(r,l,o);return e.jsxs("tr",{style:a.head_row,className:t.head_row,children:[n&&e.jsx("td",{style:a.head_cell,className:t.head_cell}),m.map(function(u,x){return e.jsx("th",{scope:"col",className:t.head_cell,style:a.head_cell,"aria-label":c(u,{locale:r}),children:i(u,{locale:r})},x)})]})}function Wa(){var s,t=S(),a=t.classNames,n=t.styles,r=t.components,l=(s=r==null?void 0:r.HeadRow)!==null&&s!==void 0?s:Ea;return e.jsx("thead",{style:n.head,className:a.head,children:e.jsx(l,{})})}function Ba(s){var t=S(),a=t.locale,n=t.formatters.formatDay;return e.jsx(e.Fragment,{children:n(s.date,{locale:a})})}var ns=j.createContext(void 0);function Ra(s){if(!ve(s.initialProps)){var t={selected:void 0,modifiers:{disabled:[]}};return e.jsx(ns.Provider,{value:t,children:s.children})}return e.jsx(Aa,{initialProps:s.initialProps,children:s.children})}function Aa(s){var t=s.initialProps,a=s.children,n=t.selected,r=t.min,l=t.max,o=function(m,u,x){var d,g;(d=t.onDayClick)===null||d===void 0||d.call(t,m,u,x);var p=!!(u.selected&&r&&(n==null?void 0:n.length)===r);if(!p){var C=!!(!u.selected&&l&&(n==null?void 0:n.length)===l);if(!C){var y=n?Es([],n):[];if(u.selected){var h=y.findIndex(function(M){return J(m,M)});y.splice(h,1)}else y.push(m);(g=t.onSelect)===null||g===void 0||g.call(t,y,m,u,x)}}},i={disabled:[]};n&&i.disabled.push(function(m){var u=l&&n.length>l-1,x=n.some(function(d){return J(d,m)});return!!(u&&!x)});var c={selected:n,onDayClick:o,modifiers:i};return e.jsx(ns.Provider,{value:c,children:a})}function os(){var s=j.useContext(ns);if(!s)throw new Error("useSelectMultiple must be used within a SelectMultipleProvider");return s}function $a(s,t){var a=t||{},n=a.from,r=a.to;return n&&r?J(r,s)&&J(n,s)?void 0:J(r,s)?{from:r,to:void 0}:J(n,s)?void 0:Ue(n,s)?{from:s,to:r}:{from:n,to:s}:r?Ue(s,r)?{from:r,to:s}:{from:s,to:r}:n?Fs(s,n)?{from:s,to:n}:{from:n,to:s}:{from:s,to:void 0}}var ls=j.createContext(void 0);function Ya(s){if(!pe(s.initialProps)){var t={selected:void 0,modifiers:{range_start:[],range_end:[],range_middle:[],disabled:[]}};return e.jsx(ls.Provider,{value:t,children:s.children})}return e.jsx(Ha,{initialProps:s.initialProps,children:s.children})}function Ha(s){var t=s.initialProps,a=s.children,n=t.selected,r=n||{},l=r.from,o=r.to,i=t.min,c=t.max,m=function(g,p,C){var y,h;(y=t.onDayClick)===null||y===void 0||y.call(t,g,p,C);var M=$a(g,n);(h=t.onSelect)===null||h===void 0||h.call(t,M,g,p,C)},u={range_start:[],range_end:[],range_middle:[],disabled:[]};if(l?(u.range_start=[l],o?(u.range_end=[o],J(l,o)||(u.range_middle=[{after:l,before:o}])):u.range_end=[l]):o&&(u.range_start=[o],u.range_end=[o]),i&&(l&&!o&&u.disabled.push({after:Ee(l,i-1),before:H(l,i-1)}),l&&o&&u.disabled.push({after:l,before:H(l,i-1)}),!l&&o&&u.disabled.push({after:Ee(o,i-1),before:H(o,i-1)})),c){if(l&&!o&&(u.disabled.push({before:H(l,-c+1)}),u.disabled.push({after:H(l,c-1)})),l&&o){var x=X(o,l)+1,d=c-x;u.disabled.push({before:Ee(l,d)}),u.disabled.push({after:H(o,d)})}!l&&o&&(u.disabled.push({before:H(o,-c+1)}),u.disabled.push({after:H(o,c-1)}))}return e.jsx(ls.Provider,{value:{selected:n,onDayClick:m,modifiers:u},children:a})}function is(){var s=j.useContext(ls);if(!s)throw new Error("useSelectRange must be used within a SelectRangeProvider");return s}function ke(s){return Array.isArray(s)?Es([],s):s!==void 0?[s]:[]}function za(s){var t={};return Object.entries(s).forEach(function(a){var n=a[0],r=a[1];t[n]=ke(r)}),t}var q;(function(s){s.Outside="outside",s.Disabled="disabled",s.Selected="selected",s.Hidden="hidden",s.Today="today",s.RangeStart="range_start",s.RangeEnd="range_end",s.RangeMiddle="range_middle"})(q||(q={}));var Ja=q.Selected,Q=q.Disabled,Ga=q.Hidden,Ka=q.Today,Re=q.RangeEnd,Ae=q.RangeMiddle,$e=q.RangeStart,Va=q.Outside;function qa(s,t,a){var n,r=(n={},n[Ja]=ke(s.selected),n[Q]=ke(s.disabled),n[Ga]=ke(s.hidden),n[Ka]=[s.today],n[Re]=[],n[Ae]=[],n[$e]=[],n[Va]=[],n);return s.fromDate&&r[Q].push({before:s.fromDate}),s.toDate&&r[Q].push({after:s.toDate}),ve(s)?r[Q]=r[Q].concat(t.modifiers[Q]):pe(s)&&(r[Q]=r[Q].concat(a.modifiers[Q]),r[$e]=a.modifiers[$e],r[Ae]=a.modifiers[Ae],r[Re]=a.modifiers[Re]),r}var $s=j.createContext(void 0);function Ua(s){var t=S(),a=os(),n=is(),r=qa(t,a,n),l=za(t.modifiers),o=w(w({},r),l);return e.jsx($s.Provider,{value:o,children:s.children})}function Ys(){var s=j.useContext($s);if(!s)throw new Error("useModifiers must be used within a ModifiersProvider");return s}function Za(s){return!!(s&&typeof s=="object"&&"before"in s&&"after"in s)}function Qa(s){return!!(s&&typeof s=="object"&&"from"in s)}function Xa(s){return!!(s&&typeof s=="object"&&"after"in s)}function er(s){return!!(s&&typeof s=="object"&&"before"in s)}function sr(s){return!!(s&&typeof s=="object"&&"dayOfWeek"in s)}function tr(s,t){var a,n=t.from,r=t.to;if(n&&r){var l=X(r,n)<0;l&&(a=[r,n],n=a[0],r=a[1]);var o=X(s,n)>=0&&X(r,s)>=0;return o}return r?J(r,s):n?J(n,s):!1}function ar(s){return Is(s)}function rr(s){return Array.isArray(s)&&s.every(Is)}function nr(s,t){return t.some(function(a){if(typeof a=="boolean")return a;if(ar(a))return J(s,a);if(rr(a))return a.includes(s);if(Qa(a))return tr(s,a);if(sr(a))return a.dayOfWeek.includes(s.getDay());if(Za(a)){var n=X(a.before,s),r=X(a.after,s),l=n>0,o=r<0,i=Ue(a.before,a.after);return i?o&&l:l||o}return Xa(a)?X(s,a.after)>0:er(a)?X(a.before,s)>0:typeof a=="function"?a(s):!1})}function cs(s,t,a){var n=Object.keys(t).reduce(function(l,o){var i=t[o];return nr(s,i)&&l.push(o),l},[]),r={};return n.forEach(function(l){return r[l]=!0}),a&&!rs(s,a)&&(r.outside=!0),r}function or(s,t){for(var a=G(s[0]),n=Qe(s[s.length-1]),r,l,o=a;o<=n;){var i=cs(o,t),c=!i.disabled&&!i.hidden;if(!c){o=H(o,1);continue}if(i.selected)return o;i.today&&!l&&(l=o),r||(r=o),o=H(o,1)}return l||r}var lr=365;function Hs(s,t){var a=t.moveBy,n=t.direction,r=t.context,l=t.modifiers,o=t.retry,i=o===void 0?{count:0,lastFocused:s}:o,c=r.weekStartsOn,m=r.fromDate,u=r.toDate,x=r.locale,d={day:H,week:qe,month:V,year:$t,startOfWeek:function(y){return r.ISOWeek?ss(y):fe(y,{locale:x,weekStartsOn:c})},endOfWeek:function(y){return r.ISOWeek?Ts(y):as(y,{locale:x,weekStartsOn:c})}},g=d[a](s,n==="after"?1:-1);n==="before"&&m?g=Yt([m,g]):n==="after"&&u&&(g=Ht([u,g]));var p=!0;if(l){var C=cs(g,l);p=!C.disabled&&!C.hidden}return p?g:i.count>lr?i.lastFocused:Hs(g,{moveBy:a,direction:n,context:r,modifiers:l,retry:w(w({},i),{count:i.count+1})})}var zs=j.createContext(void 0);function ir(s){var t=ge(),a=Ys(),n=j.useState(),r=n[0],l=n[1],o=j.useState(),i=o[0],c=o[1],m=or(t.displayMonths,a),u=r??(i&&t.isDateDisplayed(i))?i:m,x=function(){c(r),l(void 0)},d=function(y){l(y)},g=S(),p=function(y,h){if(r){var M=Hs(r,{moveBy:y,direction:h,context:g,modifiers:a});J(r,M)||(t.goToDate(M,r),d(M))}},C={focusedDay:r,focusTarget:u,blur:x,focus:d,focusDayAfter:function(){return p("day","after")},focusDayBefore:function(){return p("day","before")},focusWeekAfter:function(){return p("week","after")},focusWeekBefore:function(){return p("week","before")},focusMonthBefore:function(){return p("month","before")},focusMonthAfter:function(){return p("month","after")},focusYearBefore:function(){return p("year","before")},focusYearAfter:function(){return p("year","after")},focusStartOfWeek:function(){return p("startOfWeek","before")},focusEndOfWeek:function(){return p("endOfWeek","after")}};return e.jsx(zs.Provider,{value:C,children:s.children})}function ds(){var s=j.useContext(zs);if(!s)throw new Error("useFocusContext must be used within a FocusProvider");return s}function cr(s,t){var a=Ys(),n=cs(s,a,t);return n}var us=j.createContext(void 0);function dr(s){if(!Le(s.initialProps)){var t={selected:void 0};return e.jsx(us.Provider,{value:t,children:s.children})}return e.jsx(ur,{initialProps:s.initialProps,children:s.children})}function ur(s){var t=s.initialProps,a=s.children,n=function(l,o,i){var c,m,u;if((c=t.onDayClick)===null||c===void 0||c.call(t,l,o,i),o.selected&&!t.required){(m=t.onSelect)===null||m===void 0||m.call(t,void 0,l,o,i);return}(u=t.onSelect)===null||u===void 0||u.call(t,l,l,o,i)},r={selected:t.selected,onDayClick:n};return e.jsx(us.Provider,{value:r,children:a})}function Js(){var s=j.useContext(us);if(!s)throw new Error("useSelectSingle must be used within a SelectSingleProvider");return s}function mr(s,t){var a=S(),n=Js(),r=os(),l=is(),o=ds(),i=o.focusDayAfter,c=o.focusDayBefore,m=o.focusWeekAfter,u=o.focusWeekBefore,x=o.blur,d=o.focus,g=o.focusMonthBefore,p=o.focusMonthAfter,C=o.focusYearBefore,y=o.focusYearAfter,h=o.focusStartOfWeek,M=o.focusEndOfWeek,W=function(b){var v,L,Ie,Oe;Le(a)?(v=n.onDayClick)===null||v===void 0||v.call(n,s,t,b):ve(a)?(L=r.onDayClick)===null||L===void 0||L.call(r,s,t,b):pe(a)?(Ie=l.onDayClick)===null||Ie===void 0||Ie.call(l,s,t,b):(Oe=a.onDayClick)===null||Oe===void 0||Oe.call(a,s,t,b)},$=function(b){var v;d(s),(v=a.onDayFocus)===null||v===void 0||v.call(a,s,t,b)},f=function(b){var v;x(),(v=a.onDayBlur)===null||v===void 0||v.call(a,s,t,b)},P=function(b){var v;(v=a.onDayMouseEnter)===null||v===void 0||v.call(a,s,t,b)},N=function(b){var v;(v=a.onDayMouseLeave)===null||v===void 0||v.call(a,s,t,b)},_=function(b){var v;(v=a.onDayPointerEnter)===null||v===void 0||v.call(a,s,t,b)},I=function(b){var v;(v=a.onDayPointerLeave)===null||v===void 0||v.call(a,s,t,b)},T=function(b){var v;(v=a.onDayTouchCancel)===null||v===void 0||v.call(a,s,t,b)},Y=function(b){var v;(v=a.onDayTouchEnd)===null||v===void 0||v.call(a,s,t,b)},Z=function(b){var v;(v=a.onDayTouchMove)===null||v===void 0||v.call(a,s,t,b)},se=function(b){var v;(v=a.onDayTouchStart)===null||v===void 0||v.call(a,s,t,b)},be=function(b){var v;(v=a.onDayKeyUp)===null||v===void 0||v.call(a,s,t,b)},k=function(b){var v;switch(b.key){case"ArrowLeft":b.preventDefault(),b.stopPropagation(),a.dir==="rtl"?i():c();break;case"ArrowRight":b.preventDefault(),b.stopPropagation(),a.dir==="rtl"?c():i();break;case"ArrowDown":b.preventDefault(),b.stopPropagation(),m();break;case"ArrowUp":b.preventDefault(),b.stopPropagation(),u();break;case"PageUp":b.preventDefault(),b.stopPropagation(),b.shiftKey?C():g();break;case"PageDown":b.preventDefault(),b.stopPropagation(),b.shiftKey?y():p();break;case"Home":b.preventDefault(),b.stopPropagation(),h();break;case"End":b.preventDefault(),b.stopPropagation(),M();break}(v=a.onDayKeyDown)===null||v===void 0||v.call(a,s,t,b)},D={onClick:W,onFocus:$,onBlur:f,onKeyDown:k,onKeyUp:be,onMouseEnter:P,onMouseLeave:N,onPointerEnter:_,onPointerLeave:I,onTouchCancel:T,onTouchEnd:Y,onTouchMove:Z,onTouchStart:se};return D}function hr(){var s=S(),t=Js(),a=os(),n=is(),r=Le(s)?t.selected:ve(s)?a.selected:pe(s)?n.selected:void 0;return r}function xr(s){return Object.values(q).includes(s)}function fr(s,t){var a=[s.classNames.day];return Object.keys(t).forEach(function(n){var r=s.modifiersClassNames[n];if(r)a.push(r);else if(xr(n)){var l=s.classNames["day_".concat(n)];l&&a.push(l)}}),a}function vr(s,t){var a=w({},s.styles.day);return Object.keys(t).forEach(function(n){var r;a=w(w({},a),(r=s.modifiersStyles)===null||r===void 0?void 0:r[n])}),a}function pr(s,t,a){var n,r,l,o=S(),i=ds(),c=cr(s,t),m=mr(s,c),u=hr(),x=!!(o.onDayClick||o.mode!=="default");j.useEffect(function(){var P;c.outside||i.focusedDay&&x&&J(i.focusedDay,s)&&((P=a.current)===null||P===void 0||P.focus())},[i.focusedDay,s,a,x,c.outside]);var d=fr(o,c).join(" "),g=vr(o,c),p=!!(c.outside&&!o.showOutsideDays||c.hidden),C=(l=(r=o.components)===null||r===void 0?void 0:r.DayContent)!==null&&l!==void 0?l:Ba,y=e.jsx(C,{date:s,displayMonth:t,activeModifiers:c}),h={style:g,className:d,children:y,role:"gridcell"},M=i.focusTarget&&J(i.focusTarget,s)&&!c.outside,W=i.focusedDay&&J(i.focusedDay,s),$=w(w(w({},h),(n={disabled:c.disabled,role:"gridcell"},n["aria-selected"]=c.selected,n.tabIndex=W||M?0:-1,n)),m),f={isButton:x,isHidden:p,activeModifiers:c,selectedDays:u,buttonProps:$,divProps:h};return f}function gr(s){var t=j.useRef(null),a=pr(s.date,s.displayMonth,t);return a.isHidden?e.jsx("div",{role:"gridcell"}):a.isButton?e.jsx(Pe,w({name:"day",ref:t},a.buttonProps)):e.jsx("div",w({},a.divProps))}function br(s){var t=s.number,a=s.dates,n=S(),r=n.onWeekNumberClick,l=n.styles,o=n.classNames,i=n.locale,c=n.labels.labelWeekNumber,m=n.formatters.formatWeekNumber,u=m(Number(t),{locale:i});if(!r)return e.jsx("span",{className:o.weeknumber,style:l.weeknumber,children:u});var x=c(Number(t),{locale:i}),d=function(g){r(t,a,g)};return e.jsx(Pe,{name:"week-number","aria-label":x,className:o.weeknumber,style:l.weeknumber,onClick:d,children:u})}function jr(s){var t,a,n=S(),r=n.styles,l=n.classNames,o=n.showWeekNumber,i=n.components,c=(t=i==null?void 0:i.Day)!==null&&t!==void 0?t:gr,m=(a=i==null?void 0:i.WeekNumber)!==null&&a!==void 0?a:br,u;return o&&(u=e.jsx("td",{className:l.cell,style:r.cell,children:e.jsx(m,{number:s.weekNumber,dates:s.dates})})),e.jsxs("tr",{className:l.row,style:r.row,children:[u,s.dates.map(function(x){return e.jsx("td",{className:l.cell,style:r.cell,role:"presentation",children:e.jsx(c,{displayMonth:s.displayMonth,date:x})},Gt(x))})]})}function ys(s,t,a){for(var n=a!=null&&a.ISOWeek?Ts(t):as(t,a),r=a!=null&&a.ISOWeek?ss(s):fe(s,a),l=X(n,r),o=[],i=0;i<=l;i++)o.push(H(r,i));var c=o.reduce(function(m,u){var x=a!=null&&a.ISOWeek?Ot(u):Tt(u,a),d=m.find(function(g){return g.weekNumber===x});return d?(d.dates.push(u),m):(m.push({weekNumber:x,dates:[u]}),m)},[]);return c}function yr(s,t){var a=ys(G(s),Qe(s),t);if(t!=null&&t.useFixedWeeks){var n=Vt(s,t);if(n<6){var r=a[a.length-1],l=r.dates[r.dates.length-1],o=qe(l,6-n),i=ys(qe(l,1),o,t);a.push.apply(a,i)}}return a}function Nr(s){var t,a,n,r=S(),l=r.locale,o=r.classNames,i=r.styles,c=r.hideHead,m=r.fixedWeeks,u=r.components,x=r.weekStartsOn,d=r.firstWeekContainsDate,g=r.ISOWeek,p=yr(s.displayMonth,{useFixedWeeks:!!m,ISOWeek:g,locale:l,weekStartsOn:x,firstWeekContainsDate:d}),C=(t=u==null?void 0:u.Head)!==null&&t!==void 0?t:Wa,y=(a=u==null?void 0:u.Row)!==null&&a!==void 0?a:jr,h=(n=u==null?void 0:u.Footer)!==null&&n!==void 0?n:Ta;return e.jsxs("table",{id:s.id,className:o.table,style:i.table,role:"grid","aria-labelledby":s["aria-labelledby"],children:[!c&&e.jsx(C,{}),e.jsx("tbody",{className:o.tbody,style:i.tbody,children:p.map(function(M){return e.jsx(y,{displayMonth:s.displayMonth,dates:M.dates,weekNumber:M.weekNumber},M.weekNumber)})}),e.jsx(h,{displayMonth:s.displayMonth})]})}function wr(){return!!(typeof window<"u"&&window.document&&window.document.createElement)}var kr=wr()?j.useLayoutEffect:j.useEffect,Ye=!1,Cr=0;function Ns(){return"react-day-picker-".concat(++Cr)}function Mr(s){var t,a=s??(Ye?Ns():null),n=j.useState(a),r=n[0],l=n[1];return kr(function(){r===null&&l(Ns())},[]),j.useEffect(function(){Ye===!1&&(Ye=!0)},[]),(t=s??r)!==null&&t!==void 0?t:void 0}function _r(s){var t,a,n=S(),r=n.dir,l=n.classNames,o=n.styles,i=n.components,c=ge().displayMonths,m=Mr(n.id?"".concat(n.id,"-").concat(s.displayIndex):void 0),u=n.id?"".concat(n.id,"-grid-").concat(s.displayIndex):void 0,x=[l.month],d=o.month,g=s.displayIndex===0,p=s.displayIndex===c.length-1,C=!g&&!p;r==="rtl"&&(t=[g,p],p=t[0],g=t[1]),g&&(x.push(l.caption_start),d=w(w({},d),o.caption_start)),p&&(x.push(l.caption_end),d=w(w({},d),o.caption_end)),C&&(x.push(l.caption_between),d=w(w({},d),o.caption_between));var y=(a=i==null?void 0:i.Caption)!==null&&a!==void 0?a:Oa;return e.jsxs("div",{className:x.join(" "),style:d,children:[e.jsx(y,{id:m,displayMonth:s.displayMonth,displayIndex:s.displayIndex}),e.jsx(Nr,{id:u,"aria-labelledby":m,displayMonth:s.displayMonth})]},s.displayIndex)}function Dr(s){var t=S(),a=t.classNames,n=t.styles;return e.jsx("div",{className:a.months,style:n.months,children:s.children})}function Sr(s){var t,a,n=s.initialProps,r=S(),l=ds(),o=ge(),i=j.useState(!1),c=i[0],m=i[1];j.useEffect(function(){r.initialFocus&&l.focusTarget&&(c||(l.focus(l.focusTarget),m(!0)))},[r.initialFocus,c,l.focus,l.focusTarget,l]);var u=[r.classNames.root,r.className];r.numberOfMonths>1&&u.push(r.classNames.multiple_months),r.showWeekNumber&&u.push(r.classNames.with_weeknumber);var x=w(w({},r.styles.root),r.style),d=Object.keys(n).filter(function(p){return p.startsWith("data-")}).reduce(function(p,C){var y;return w(w({},p),(y={},y[C]=n[C],y))},{}),g=(a=(t=n.components)===null||t===void 0?void 0:t.Months)!==null&&a!==void 0?a:Dr;return e.jsx("div",w({className:u.join(" "),style:x,dir:r.dir,id:r.id,nonce:n.nonce,title:n.title,lang:n.lang},d,{children:e.jsx(g,{children:o.displayMonths.map(function(p,C){return e.jsx(_r,{displayIndex:C,displayMonth:p},C)})})}))}function Pr(s){var t=s.children,a=ea(s,["children"]);return e.jsx(ba,{initialProps:a,children:e.jsx(Sa,{children:e.jsx(dr,{initialProps:a,children:e.jsx(Ra,{initialProps:a,children:e.jsx(Ya,{initialProps:a,children:e.jsx(Ua,{children:e.jsx(ir,{children:t})})})})})})})}function Lr(s){return e.jsx(Pr,w({},s,{children:e.jsx(Sr,{initialProps:s})}))}function Gs({className:s,classNames:t,showOutsideDays:a=!0,...n}){return e.jsx(Lr,{showOutsideDays:a,className:O("p-3",s),classNames:{months:"flex flex-col sm:flex-row space-y-4 sm:space-x-4 sm:space-y-0",month:"space-y-4",caption:"flex justify-center pt-1 relative items-center",caption_label:"text-sm font-medium",nav:"space-x-1 flex items-center",nav_button:O(hs({variant:"outline"}),"h-7 w-7 bg-transparent p-0 opacity-50 hover:opacity-100"),nav_button_previous:"absolute left-1",nav_button_next:"absolute right-1",table:"w-full border-collapse space-y-1",head_row:"flex",head_cell:"text-muted-foreground rounded-md w-9 font-normal text-[0.8rem]",row:"flex w-full mt-2",cell:"h-9 w-9 text-center text-sm p-0 relative [&:has([aria-selected].day-range-end)]:rounded-r-md [&:has([aria-selected].day-outside)]:bg-accent/50 [&:has([aria-selected])]:bg-accent first:[&:has([aria-selected])]:rounded-l-md last:[&:has([aria-selected])]:rounded-r-md focus-within:relative focus-within:z-20",day:O(hs({variant:"ghost"}),"h-9 w-9 p-0 font-normal aria-selected:opacity-100"),day_range_end:"day-range-end",day_selected:"bg-primary text-primary-foreground hover:bg-primary hover:text-primary-foreground focus:bg-primary focus:text-primary-foreground",day_today:"bg-accent text-accent-foreground",day_outside:"day-outside text-muted-foreground opacity-50 aria-selected:bg-accent/50 aria-selected:text-muted-foreground aria-selected:opacity-30",day_disabled:"text-muted-foreground opacity-50",day_range_middle:"aria-selected:bg-accent aria-selected:text-accent-foreground",day_hidden:"invisible",...t},components:{IconLeft:({...r})=>e.jsx(it,{className:"h-4 w-4"}),IconRight:({...r})=>e.jsx(ct,{className:"h-4 w-4"})},...n})}Gs.displayName="Calendar";const Ir=[{value:"repair",icon:Xe,color:"hsl(14, 100%, 57%)",bgGradient:"linear-gradient(135deg, hsl(14, 100%, 57%) 0%, hsl(14, 100%, 47%) 100%)"},{value:"maintenance",icon:Bt,color:"hsl(217, 91%, 60%)",bgGradient:"linear-gradient(135deg, hsl(217, 91%, 60%) 0%, hsl(217, 91%, 50%) 100%)"},{value:"inspection",icon:Me,color:"hsl(271, 81%, 56%)",bgGradient:"linear-gradient(135deg, hsl(271, 81%, 56%) 0%, hsl(271, 81%, 46%) 100%)"},{value:"diagnostic",icon:es,color:"hsl(168, 76%, 42%)",bgGradient:"linear-gradient(135deg, hsl(168, 76%, 42%) 0%, hsl(168, 76%, 32%) 100%)"}];function Or({formData:s,errors:t,onUpdate:a,hideScheduling:n}){const{t:r}=re(),l=Ir.map(d=>({...d,label:r(`serviceType.${d.value}`),description:r(`serviceType.${d.value}Desc`)})),o=[{value:30,label:r("duration.30min")},{value:60,label:r("duration.1hour")},{value:90,label:r("duration.1-5hours")},{value:120,label:r("duration.2hours")},{value:180,label:r("duration.3hours")},{value:240,label:r("duration.4hours")},{value:480,label:r("duration.fullDay")}],[i,c]=j.useState([]),[m,u]=j.useState(!0);j.useEffect(()=>{(async()=>{u(!0);try{const g=await ut();c(g)}catch(g){console.error("Error loading mechanics:",g)}finally{u(!1)}})()},[]);const x=[{value:"low",label:r("jobs.priority.low"),color:"hsl(var(--priority-low))"},{value:"normal",label:r("jobs.priority.normal"),color:"hsl(var(--priority-normal))"},{value:"urgent",label:r("jobs.priority.urgent"),color:"hsl(var(--priority-urgent))"}];return m?e.jsx("div",{className:"space-y-6 animate-fade-in",children:e.jsx("div",{className:"text-center py-16",children:e.jsx("p",{className:"text-muted-foreground text-lg",children:r("jobs.details.loading")})})}):e.jsxs("div",{className:"space-y-6 animate-fade-in",children:[e.jsxs("div",{className:"text-center mb-6",children:[e.jsx("h2",{className:"text-2xl font-bold mb-2",children:r("jobs.details.title")}),e.jsx("p",{className:"text-muted-foreground",children:r("jobs.details.subtitle")||"Configure the service type, schedule, and assignment"})]}),e.jsxs(B,{className:"glass-strong border-0 shadow-premium-lg overflow-hidden",children:[e.jsx("div",{className:"absolute inset-0 gradient-royal-radial opacity-5 pointer-events-none"}),e.jsxs(A,{className:"pt-6 space-y-4 relative",children:[e.jsxs(z,{className:"flex items-center gap-2 text-base font-semibold",children:[e.jsx(Xe,{className:"h-5 w-5 text-primary"}),r("jobs.details.serviceType")]}),e.jsx("div",{className:"grid grid-cols-2 gap-4",children:l.map(d=>{const g=d.icon,p=s.serviceType===d.value;return e.jsxs("button",{type:"button",onClick:()=>a({serviceType:d.value}),className:O("p-5 rounded-xl border-2 text-left transition-all duration-300 group relative overflow-hidden",p?"scale-[1.05] shadow-xl":"border-border/30 hover:scale-[1.02] hover:shadow-lg"),style:{borderColor:p?d.color:void 0,backgroundColor:p?`${d.color}10`:void 0},children:[p&&e.jsx("div",{className:"absolute inset-0 opacity-10 pointer-events-none",style:{background:d.bgGradient}}),e.jsxs("div",{className:"flex items-center gap-3 mb-2 relative z-10",children:[e.jsx("div",{className:O("p-2.5 rounded-xl transition-all duration-300 shadow-lg",p&&"scale-110"),style:{background:p?d.bgGradient:"hsl(var(--muted))"},children:e.jsx(g,{className:O("h-5 w-5 transition-colors",p?"text-white":"text-muted-foreground group-hover:opacity-70")})}),e.jsx("span",{className:O("font-semibold transition-colors text-foreground",p&&"font-bold"),style:{color:p?d.color:void 0},children:d.label})]}),e.jsx("p",{className:"text-xs text-muted-foreground dark:text-muted-foreground/90 relative z-10 leading-relaxed",children:d.description}),p&&e.jsxs("div",{className:"absolute top-3 right-3 flex gap-1",children:[e.jsx("div",{className:"w-2 h-2 rounded-full animate-pulse",style:{backgroundColor:d.color}}),e.jsx("div",{className:"w-2 h-2 rounded-full animate-pulse",style:{backgroundColor:d.color,animationDelay:"0.2s"}})]}),!p&&e.jsx("div",{className:"absolute inset-0 opacity-0 group-hover:opacity-5 transition-opacity pointer-events-none",style:{background:d.bgGradient}})]},d.value)})})]})]}),e.jsxs(B,{className:"glass-strong border-0 shadow-premium-lg overflow-hidden",children:[e.jsx("div",{className:"absolute inset-0 gradient-royal-radial opacity-5 pointer-events-none"}),e.jsxs(A,{className:"pt-6 space-y-5 relative",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsxs(z,{htmlFor:"problemDescription",className:"flex items-center gap-2 text-base font-semibold",children:[e.jsx(ts,{className:"h-5 w-5 text-primary"}),r("jobs.problemDescription")," *"]}),e.jsx(Lt,{id:"problemDescription",value:s.problemDescription,onChange:d=>a({problemDescription:d.target.value}),placeholder:r("jobs.details.problemDescPlaceholder"),rows:5,className:O("text-base resize-none rounded-xl border-2 transition-all",t.problemDescription?"border-destructive focus:border-destructive":"border-border/30 focus:border-primary")}),t.problemDescription&&e.jsxs("p",{className:"text-sm text-destructive flex items-center gap-1",children:[e.jsx("span",{className:"text-lg",children:"⚠"})," ",t.problemDescription]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:s.problemDescription.length>=10?`✓ ${r("jobs.details.goodDescription")}`:r("jobs.details.minChars")}),e.jsx("p",{className:"text-xs text-muted-foreground",children:r("jobs.details.charCount").replace("{count}",s.problemDescription.length.toString())})]})]}),e.jsxs("div",{className:"space-y-4 pt-2",children:[e.jsxs(z,{className:"flex items-center gap-2 text-base font-semibold",children:[e.jsx(de,{className:"h-5 w-5 text-primary"}),r("jobs.priority")]}),e.jsx("div",{className:"grid grid-cols-3 gap-4",children:x.map(d=>e.jsxs("button",{type:"button",onClick:()=>a({priority:d.value}),className:O("relative p-5 rounded-xl border-2 transition-all duration-300 group",s.priority===d.value?"border-current shadow-glow scale-105":"border-border/30 hover:border-current/50 hover:scale-[1.02]"),style:{color:s.priority===d.value?d.color:void 0,backgroundColor:s.priority===d.value?`${d.color}15`:void 0},children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:O("w-6 h-6 rounded-full mx-auto mb-3 transition-all",s.priority===d.value&&"ring-4 ring-current/30 scale-110"),style:{backgroundColor:d.color}}),e.jsx("span",{className:O("text-sm font-semibold transition-colors",s.priority!==d.value&&"text-foreground group-hover:text-current"),children:d.label})]}),s.priority===d.value&&e.jsx("div",{className:"absolute top-2 right-2 w-2 h-2 rounded-full animate-pulse",style:{backgroundColor:d.color}})]},d.value))})]})]})]}),!n&&e.jsxs(B,{className:"glass-strong border-0 shadow-premium-lg overflow-hidden",children:[e.jsx("div",{className:"absolute inset-0 gradient-royal-radial opacity-5 pointer-events-none"}),e.jsxs(A,{className:"pt-6 space-y-5 relative",children:[e.jsxs(z,{className:"flex items-center gap-2 text-base font-semibold",children:[e.jsx(Se,{className:"h-5 w-5 text-primary"}),r("jobs.details.scheduling")]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(z,{className:"text-sm font-medium",children:r("jobs.details.appointmentDate")}),e.jsxs(Ft,{children:[e.jsx(Et,{asChild:!0,children:e.jsxs(F,{variant:"outline",className:O("w-full h-14 justify-start text-left font-normal rounded-xl border-2 border-border/30 hover:border-primary transition-all",!s.scheduledDate&&"text-muted-foreground"),children:[e.jsx(Se,{className:"mr-2 h-5 w-5 text-primary"}),s.scheduledDate?ee(s.scheduledDate,"dd/MM/yyyy"):r("jobs.details.selectDate")]})}),e.jsx(Wt,{className:"w-auto p-0 z-50 glass-strong shadow-premium-xl border-0",align:"start",children:e.jsx(Gs,{mode:"single",selected:s.scheduledDate,onSelect:d=>a({scheduledDate:d}),disabled:d=>d<new Date(new Date().setHours(0,0,0,0)),initialFocus:!0,className:"p-3 pointer-events-auto rounded-xl"})})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(z,{className:"text-sm font-medium",children:r("jobs.details.estDuration")}),e.jsxs(ze,{value:s.estimatedDuration.toString(),onValueChange:d=>a({estimatedDuration:parseInt(d)}),children:[e.jsxs(Je,{className:"h-14 rounded-xl border-2 border-border/30 hover:border-primary transition-all",children:[e.jsx(Cs,{className:"mr-2 h-5 w-5 text-primary"}),e.jsx(Ge,{placeholder:"Duration"})]}),e.jsx(Ke,{className:"glass-strong border-0 shadow-premium-lg",children:o.map(d=>e.jsx(we,{value:d.value.toString(),children:d.label},d.value))})]})]})]}),e.jsxs("div",{className:"space-y-3 pt-2",children:[e.jsxs(z,{className:"flex items-center gap-2 text-sm font-semibold",children:[e.jsx(Os,{className:"h-5 w-5 text-primary"}),r("jobs.details.assignMechanic")]}),e.jsxs(ze,{value:s.assignedMechanicId||"_unassigned",onValueChange:d=>a({assignedMechanicId:d==="_unassigned"?"":d}),children:[e.jsx(Je,{className:"h-14 rounded-xl border-2 border-border/30 hover:border-primary transition-all",children:e.jsx(Ge,{placeholder:"Select a mechanic..."})}),e.jsxs(Ke,{className:"glass-strong border-0 shadow-premium-lg",children:[e.jsx(we,{value:"_unassigned",children:r("jobs.details.unassigned")}),i.map(d=>e.jsx(we,{value:d.id,children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(dt,{className:"h-4 w-4"}),d.fullName]})},d.id))]})]}),i.length===0&&e.jsx("p",{className:"text-xs text-muted-foreground bg-muted/50 p-3 rounded-lg",children:"No mechanics available. Add mechanics in settings."})]})]})]})]})}const Tr=[{id:"engine",color:"#ef4444",icon:({selected:s,color:t})=>e.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",className:"w-8 h-8",strokeWidth:1.8,children:[e.jsx("path",{d:"M3 8h2v2H3zM19 8h2v2h-2zM7 5v2M17 5v2M7 17v2M17 17v2",stroke:t,strokeLinecap:"round"}),e.jsx("rect",{x:"5",y:"7",width:"14",height:"10",rx:"2",stroke:t,fill:s?`${t}20`:"none"}),e.jsx("circle",{cx:"9",cy:"12",r:"1.5",fill:t}),e.jsx("circle",{cx:"15",cy:"12",r:"1.5",fill:t}),e.jsx("path",{d:"M9 12h6",stroke:t,strokeLinecap:"round"})]})},{id:"brakes",color:"#f97316",icon:({selected:s,color:t})=>e.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",className:"w-8 h-8",strokeWidth:1.8,children:[e.jsx("circle",{cx:"12",cy:"12",r:"9",stroke:t,fill:s?`${t}20`:"none"}),e.jsx("circle",{cx:"12",cy:"12",r:"4",stroke:t}),e.jsx("path",{d:"M12 3v3M12 18v3M3 12h3M18 12h3",stroke:t,strokeLinecap:"round"}),e.jsx("circle",{cx:"12",cy:"12",r:"1.5",fill:t})]})},{id:"electrical",color:"#eab308",icon:({selected:s,color:t})=>e.jsx("svg",{viewBox:"0 0 24 24",fill:"none",className:"w-8 h-8",children:e.jsx("path",{d:"M13 2L4.09 12.11A1 1 0 005 13.78h5.5l-1.5 8.22 8.91-10.11A1 1 0 0017 10.22H11.5L13 2z",stroke:t,strokeWidth:1.8,strokeLinecap:"round",strokeLinejoin:"round",fill:s?`${t}20`:"none"})})},{id:"transmission",color:"#84cc16",icon:({selected:s,color:t})=>e.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",className:"w-8 h-8",strokeWidth:1.8,children:[e.jsx("circle",{cx:"5",cy:"6",r:"2",stroke:t,fill:s?`${t}20`:"none"}),e.jsx("circle",{cx:"19",cy:"6",r:"2",stroke:t,fill:s?`${t}20`:"none"}),e.jsx("circle",{cx:"12",cy:"6",r:"2",stroke:t,fill:s?`${t}20`:"none"}),e.jsx("circle",{cx:"12",cy:"18",r:"2",stroke:t,fill:s?`${t}20`:"none"}),e.jsx("path",{d:"M5 8v4h7M19 8v4h-7M12 12v4",stroke:t,strokeLinecap:"round"})]})},{id:"suspension",color:"#22c55e",icon:({selected:s,color:t})=>e.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",className:"w-8 h-8",strokeWidth:1.8,children:[e.jsx("path",{d:"M12 3v4M12 17v4",stroke:t,strokeLinecap:"round"}),e.jsx("path",{d:"M6 7h12M6 17h12",stroke:t,strokeLinecap:"round"}),e.jsx("path",{d:"M8 7c0 2.5 2 4 4 4s4-1.5 4-4",stroke:t,fill:s?`${t}20`:"none",strokeLinecap:"round"}),e.jsx("path",{d:"M8 17c0-2.5 2-4 4-4s4 1.5 4 4",stroke:t,fill:s?`${t}20`:"none",strokeLinecap:"round"})]})},{id:"fluids",color:"#06b6d4",icon:({selected:s,color:t})=>e.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",className:"w-8 h-8",strokeWidth:1.8,children:[e.jsx("path",{d:"M12 2C6 9 4 13 4 16a8 8 0 0016 0c0-3-2-7-8-14z",stroke:t,strokeLinecap:"round",strokeLinejoin:"round",fill:s?`${t}30`:"none"}),e.jsx("path",{d:"M8 16.5c0 2.2 1.8 4 4 4",stroke:t,strokeLinecap:"round",opacity:"0.5"})]})},{id:"cooling",color:"#3b82f6",icon:({selected:s,color:t})=>e.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",className:"w-8 h-8",strokeWidth:1.8,children:[e.jsx("circle",{cx:"12",cy:"12",r:"3",stroke:t,fill:s?`${t}30`:"none"}),e.jsx("path",{d:"M12 2v4M12 18v4M4.22 4.22l2.83 2.83M16.95 16.95l2.83 2.83M2 12h4M18 12h4M4.22 19.78l2.83-2.83M16.95 7.05l2.83-2.83",stroke:t,strokeLinecap:"round"})]})},{id:"air_system",color:"#6366f1",icon:({selected:s,color:t})=>e.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",className:"w-8 h-8",strokeWidth:1.8,children:[e.jsx("path",{d:"M5 8h8a4 4 0 010 8H5",stroke:t,strokeLinecap:"round",fill:s?`${t}20`:"none"}),e.jsx("path",{d:"M3 12h6",stroke:t,strokeLinecap:"round"}),e.jsx("path",{d:"M5 16h5a2 2 0 000-4H5",stroke:t,strokeLinecap:"round"})]})},{id:"lighting",color:"#f59e0b",icon:({selected:s,color:t})=>e.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",className:"w-8 h-8",strokeWidth:1.8,children:[e.jsx("circle",{cx:"12",cy:"12",r:"5",stroke:t,fill:s?`${t}30`:"none"}),e.jsx("path",{d:"M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42",stroke:t,strokeLinecap:"round"})]})},{id:"body",color:"#ec4899",icon:({selected:s,color:t})=>e.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",className:"w-8 h-8",strokeWidth:1.8,children:[e.jsx("path",{d:"M5 17H3a2 2 0 01-2-2v-4l3-6h12l3 6v4a2 2 0 01-2 2h-2",stroke:t,strokeLinecap:"round",strokeLinejoin:"round",fill:s?`${t}20`:"none"}),e.jsx("circle",{cx:"7.5",cy:"17.5",r:"2.5",stroke:t,fill:s?`${t}30`:"none"}),e.jsx("circle",{cx:"16.5",cy:"17.5",r:"2.5",stroke:t,fill:s?`${t}30`:"none"}),e.jsx("path",{d:"M5 9h14",stroke:t,strokeLinecap:"round"})]})},{id:"gauges",color:"#a855f7",icon:({selected:s,color:t})=>e.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",className:"w-8 h-8",strokeWidth:1.8,children:[e.jsx("path",{d:"M12 22a9 9 0 100-18 9 9 0 000 18z",stroke:t,fill:s?`${t}20`:"none"}),e.jsx("path",{d:"M12 7v1M7 12H6M17 12h1M8.46 8.46l.7.7",stroke:t,strokeLinecap:"round"}),e.jsx("path",{d:"M12 12l2.5-3.5",stroke:t,strokeLinecap:"round"}),e.jsx("circle",{cx:"12",cy:"12",r:"1.5",fill:t})]})},{id:"wheels",color:"#64748b",icon:({selected:s,color:t})=>e.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",className:"w-8 h-8",strokeWidth:1.8,children:[e.jsx("circle",{cx:"12",cy:"12",r:"10",stroke:t,fill:s?`${t}20`:"none"}),e.jsx("circle",{cx:"12",cy:"12",r:"3",stroke:t,fill:s?`${t}40`:"none"}),e.jsx("path",{d:"M12 2v7M12 15v7M2 12h7M15 12h7M5.64 5.64l4.95 4.95M13.41 13.41l4.95 4.95M5.64 18.36l4.95-4.95M13.41 10.59l4.95-4.95",stroke:t,strokeLinecap:"round"})]})},{id:"drivetrain",color:"#14b8a6",icon:({selected:s,color:t})=>e.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",className:"w-8 h-8",strokeWidth:1.8,children:[e.jsx("circle",{cx:"5",cy:"12",r:"3",stroke:t,fill:s?`${t}30`:"none"}),e.jsx("circle",{cx:"19",cy:"12",r:"3",stroke:t,fill:s?`${t}30`:"none"}),e.jsx("path",{d:"M8 12h8",stroke:t,strokeLinecap:"round",strokeDasharray:"2 1.5"}),e.jsx("path",{d:"M12 9v6",stroke:t,strokeLinecap:"round"}),e.jsx("path",{d:"M10 10l4 4M14 10l-4 4",stroke:t,strokeLinecap:"round"})]})},{id:"audio",color:"#0ea5e9",icon:({selected:s,color:t})=>e.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",className:"w-8 h-8",strokeWidth:1.8,children:[e.jsx("rect",{x:"3",y:"8",width:"10",height:"8",rx:"1",stroke:t,fill:s?`${t}20`:"none"}),e.jsx("path",{d:"M13 9l4-3v12l-4-3",stroke:t,strokeLinecap:"round",strokeLinejoin:"round"}),e.jsx("circle",{cx:"8",cy:"12",r:"2",stroke:t,fill:s?`${t}30`:"none"})]})},{id:"accessories",color:"#f43f5e",icon:({selected:s,color:t})=>e.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",className:"w-8 h-8",strokeWidth:1.8,children:[e.jsx("path",{d:"M20.59 13.41l-7.17 7.17a2 2 0 01-2.83 0L2 12V2h10l8.59 8.59a2 2 0 010 2.82z",stroke:t,strokeLinecap:"round",strokeLinejoin:"round",fill:s?`${t}20`:"none"}),e.jsx("circle",{cx:"7",cy:"7",r:"1.5",fill:t})]})}];function Fr({formData:s,errors:t,onUpdate:a}){const{t:n}=re(),r=i=>n(`modal.parts.category.${i}`),l=s.faultCategory?s.faultCategory.split(","):[],o=i=>{const c=l.includes(i)?l.filter(m=>m!==i):[...l,i];a({faultCategory:c.length>0?c.join(","):void 0})};return e.jsxs("div",{className:"space-y-6 animate-fade-in",children:[e.jsxs("div",{className:"text-center mb-6",children:[e.jsx("h2",{className:"text-2xl font-bold mb-2",children:n("jobs.category.title")}),e.jsx("p",{className:"text-muted-foreground",children:n("jobs.category.subtitle")})]}),e.jsxs(B,{className:"glass-strong border-0 shadow-premium-lg overflow-hidden",children:[e.jsx("div",{className:"absolute inset-0 gradient-royal-radial opacity-5 pointer-events-none"}),e.jsxs(A,{className:"pt-6 space-y-4 relative",children:[e.jsxs(z,{className:"flex items-center gap-2 text-base font-semibold",children:[e.jsx(de,{className:"h-5 w-5 text-primary"}),n("jobs.category.selectTitle"),l.length>0&&e.jsxs("span",{className:"text-sm font-normal text-muted-foreground",children:["(",l.length," ",n("jobs.category.selected"),")"]})]}),e.jsx("div",{className:"grid grid-cols-4 sm:grid-cols-5 gap-2",children:Tr.map(i=>{const c=l.includes(i.id);return e.jsxs("button",{type:"button",onClick:()=>o(i.id),className:O("flex flex-col items-center gap-2 p-3 rounded-xl border transition-all duration-200 relative",c?"border-2 shadow-md":"border-border/30 hover:border-border/60 hover:bg-muted/30"),style:{borderColor:c?i.color:void 0,backgroundColor:c?`${i.color}10`:void 0},children:[i.icon({selected:c,color:i.color}),e.jsx("span",{className:O("text-[10px] font-medium text-center leading-tight",c?"font-semibold":"text-muted-foreground"),style:{color:c?i.color:void 0},children:r(i.id)}),c&&e.jsx("div",{className:"absolute top-1.5 right-1.5 w-2 h-2 rounded-full",style:{backgroundColor:i.color}})]},i.id)})}),l.length>0&&e.jsx("div",{className:"flex justify-center pt-2",children:e.jsx("button",{type:"button",onClick:()=>a({faultCategory:void 0}),className:"text-sm text-muted-foreground hover:text-foreground transition-colors underline",children:n("jobs.category.clearAll")})}),e.jsx("div",{className:"mt-2 p-3 glass-light rounded-xl",children:e.jsxs("p",{className:"text-xs text-muted-foreground text-center",children:["💡 ",n("jobs.category.hint")]})})]})]})]})}function Er({formData:s,selectedVehicle:t,onEdit:a,hideScheduling:n}){const{t:r}=re(),l={repair:r("serviceType.repair"),maintenance:r("serviceType.maintenance"),inspection:r("serviceType.inspection"),diagnostic:r("serviceType.diagnostic")},o={30:r("duration.30min"),60:r("duration.1hour"),90:r("duration.1-5hours"),120:r("duration.2hours"),180:r("duration.3hours"),240:r("duration.4hours"),480:r("duration.fullDay")},[i,c]=j.useState(null),m={low:"hsl(var(--priority-low))",normal:"hsl(var(--priority-normal))",urgent:"hsl(var(--priority-urgent))"};return j.useEffect(()=>{(async()=>{if(s.assignedMechanicId){const x=await mt(s.assignedMechanicId);c(x)}else c(null)})()},[s.assignedMechanicId]),e.jsxs("div",{className:"space-y-6 animate-fade-in",children:[e.jsxs("div",{className:"text-center mb-6",children:[e.jsx("h2",{className:"text-2xl font-bold mb-2",children:r("jobs.review.title")}),e.jsx("p",{className:"text-muted-foreground",children:r("jobs.review.subtitle")})]}),e.jsxs(B,{className:"glass-strong border-0 shadow-premium-lg overflow-hidden group hover-lift",children:[e.jsx("div",{className:"absolute inset-0 gradient-royal-radial opacity-5 pointer-events-none"}),e.jsxs(Te,{className:"pb-3 flex flex-row items-center justify-between relative border-b border-border/30",children:[e.jsxs(Fe,{className:"text-base flex items-center gap-2 font-semibold",children:[e.jsx("div",{className:"p-2 rounded-lg bg-primary/10",children:e.jsx(_e,{className:"h-5 w-5 text-primary"})}),r("jobs.review.vehicle")]}),e.jsxs(F,{variant:"ghost",size:"sm",onClick:()=>a(0),className:"hover:bg-primary/10 hover:text-primary transition-all",children:[e.jsx(We,{className:"h-4 w-4 mr-1"}),r("jobs.review.edit")]})]}),e.jsx(A,{className:"pt-4 relative",children:t&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-12 h-12 gradient-royal rounded-xl flex items-center justify-center shadow-glow",children:e.jsx(_e,{className:"h-6 w-6 text-white"})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("p",{className:"font-semibold text-lg text-foreground",children:[t.brand," ",t.model]}),e.jsxs("p",{className:"text-sm text-muted-foreground font-medium",children:[t.year," • ",t.licensePlate]})]})]}),(t.vin||s.mileage)&&e.jsxs("div",{className:"grid grid-cols-2 gap-3 pt-2",children:[t.vin&&e.jsxs("div",{className:"p-3 glass-light rounded-lg",children:[e.jsx("span",{className:"text-xs text-muted-foreground block mb-1",children:"VIN"}),e.jsx("span",{className:"font-mono text-xs font-medium",children:t.vin})]}),s.mileage&&e.jsxs("div",{className:"flex items-center gap-2 p-3 glass-light rounded-lg",children:[e.jsx(es,{className:"h-5 w-5 text-primary"}),e.jsxs("div",{children:[e.jsx("span",{className:"text-xs text-muted-foreground block",children:r("jobs.review.kilometers")}),e.jsxs("span",{className:"font-semibold",children:[parseInt(s.mileage).toLocaleString()," km"]})]})]})]})]})})]}),e.jsxs(B,{className:"glass-strong border-0 shadow-premium-lg overflow-hidden group hover-lift",children:[e.jsx("div",{className:"absolute inset-0 gradient-royal-radial opacity-5 pointer-events-none"}),e.jsxs(Te,{className:"pb-3 flex flex-row items-center justify-between relative border-b border-border/30",children:[e.jsxs(Fe,{className:"text-base flex items-center gap-2 font-semibold",children:[e.jsx("div",{className:"p-2 rounded-lg bg-primary/10",children:e.jsx(he,{className:"h-5 w-5 text-primary"})}),r("jobs.review.customer")]}),e.jsxs(F,{variant:"ghost",size:"sm",onClick:()=>a(1),className:"hover:bg-primary/10 hover:text-primary transition-all",children:[e.jsx(We,{className:"h-4 w-4 mr-1"}),r("jobs.review.edit")]})]}),e.jsxs(A,{className:"space-y-4 pt-4 relative",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-12 h-12 gradient-royal rounded-xl flex items-center justify-center shadow-glow",children:e.jsx(he,{className:"h-6 w-6 text-white"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-semibold text-lg text-foreground",children:s.customerName}),s.isReturningCustomer&&e.jsxs(U,{className:"text-xs bg-gold/10 text-gold-foreground border-gold/30 mt-1",children:[e.jsx(ae,{className:"h-3 w-3 mr-1"}),r("jobs.review.returningCustomer")]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 pt-2",children:[e.jsxs("div",{className:"flex items-center gap-2 p-3 glass-light rounded-lg",children:[e.jsx(Ne,{className:"h-4 w-4 text-primary"}),e.jsx("span",{className:"text-sm font-medium",children:s.customerPhone})]}),s.customerEmail&&e.jsxs("div",{className:"flex items-center gap-2 p-3 glass-light rounded-lg",children:[e.jsx(ye,{className:"h-4 w-4 text-primary"}),e.jsx("span",{className:"text-sm font-medium truncate",children:s.customerEmail})]})]}),s.customerNotes&&e.jsxs(e.Fragment,{children:[e.jsx(xs,{}),e.jsxs("div",{className:"flex items-start gap-3 p-3 bg-muted/30 rounded-lg",children:[e.jsx(At,{className:"h-4 w-4 text-primary mt-0.5"}),e.jsx("span",{className:"text-sm text-foreground",children:s.customerNotes})]})]})]})]}),e.jsxs(B,{className:"glass-strong border-0 shadow-premium-lg overflow-hidden group hover-lift",children:[e.jsx("div",{className:"absolute inset-0 gradient-royal-radial opacity-5 pointer-events-none"}),e.jsxs(Te,{className:"pb-3 flex flex-row items-center justify-between relative border-b border-border/30",children:[e.jsxs(Fe,{className:"text-base flex items-center gap-2 font-semibold",children:[e.jsx("div",{className:"p-2 rounded-lg bg-primary/10",children:e.jsx(ts,{className:"h-5 w-5 text-primary"})}),r("jobs.review.jobDetails")]}),e.jsxs(F,{variant:"ghost",size:"sm",onClick:()=>a(2),className:"hover:bg-primary/10 hover:text-primary transition-all",children:[e.jsx(We,{className:"h-4 w-4 mr-1"}),r("jobs.review.edit")]})]}),e.jsxs(A,{className:"space-y-5 pt-4 relative",children:[e.jsxs("div",{className:"flex flex-wrap gap-3",children:[e.jsxs(U,{className:"flex items-center gap-2 px-4 py-2 text-sm bg-primary/10 text-primary border-primary/30",children:[e.jsx(Xe,{className:"h-4 w-4"}),l[s.serviceType]]}),e.jsxs(U,{className:"flex items-center gap-2 px-4 py-2 text-sm font-semibold",style:{backgroundColor:`${m[s.priority]}20`,color:m[s.priority],borderColor:m[s.priority]},children:[e.jsx("span",{className:"w-3 h-3 rounded-full animate-pulse",style:{backgroundColor:m[s.priority]}}),r(`jobs.priority.${s.priority}`)]})]}),s.faultCategory&&e.jsxs("div",{className:"p-4 glass-light rounded-xl",children:[e.jsxs("p",{className:"text-xs text-muted-foreground font-semibold mb-3 flex items-center gap-2",children:[e.jsx(de,{className:"h-4 w-4"}),r("jobDetail.affectedAreas")]}),e.jsx("div",{className:"flex flex-wrap gap-2",children:s.faultCategory.split(",").map((u,x)=>e.jsx(U,{variant:"outline",className:"text-sm",children:r(`modal.parts.category.${u.trim()}`)},x))})]}),e.jsxs("div",{className:"p-4 glass-light rounded-xl",children:[e.jsx("p",{className:"text-xs text-muted-foreground font-semibold mb-2",children:r("jobs.review.problemDescription")}),e.jsx("p",{className:"text-sm text-foreground leading-relaxed",children:s.problemDescription})]}),!n&&e.jsxs(e.Fragment,{children:[e.jsx(xs,{}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"flex items-center gap-3 p-4 glass-light rounded-xl",children:[e.jsx("div",{className:"p-2 rounded-lg bg-primary/10",children:e.jsx(Se,{className:"h-5 w-5 text-primary"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-muted-foreground font-medium",children:r("jobs.review.scheduled")}),e.jsx("p",{className:"font-semibold text-sm",children:s.scheduledDate?ee(s.scheduledDate,"dd/MM/yyyy"):r("jobs.review.notScheduled")})]})]}),e.jsxs("div",{className:"flex items-center gap-3 p-4 glass-light rounded-xl",children:[e.jsx("div",{className:"p-2 rounded-lg bg-primary/10",children:e.jsx(Cs,{className:"h-5 w-5 text-primary"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-muted-foreground font-medium",children:r("jobs.review.duration")}),e.jsx("p",{className:"font-semibold text-sm",children:o[s.estimatedDuration]||`${s.estimatedDuration} min`})]})]})]}),i&&e.jsxs("div",{className:"flex items-center gap-3 p-4 gradient-royal rounded-xl shadow-glow min-h-[72px]",children:[e.jsx(Os,{className:"h-6 w-6 text-white flex-shrink-0"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-xs text-white/80 font-medium",children:r("jobs.review.assignedTo")}),e.jsx("p",{className:"font-semibold text-white break-words",children:i.fullName})]})]})]})]})]})]})}function ws({open:s,onOpenChange:t,customerName:a,complaints:n,onContinue:r,onGoBack:l}){const{t:o}=re();return e.jsx(Ds,{open:s,onOpenChange:t,children:e.jsxs(Ss,{className:"sm:max-w-lg",children:[e.jsx(Ps,{children:e.jsxs("div",{className:"flex items-center gap-3 mb-1",children:[e.jsx("div",{className:"h-10 w-10 rounded-xl bg-amber-500/20 flex items-center justify-center",children:e.jsx(de,{className:"h-5 w-5 text-amber-600"})}),e.jsxs("div",{children:[e.jsx(Ls,{className:"text-amber-700 dark:text-amber-400",children:o("complaint.warning.title")}),e.jsx(St,{children:n.length===1?o("complaint.warning.hasComplaint").replace("{name}",a).replace("{count}",n.length.toString()):o("complaint.warning.hasComplaints").replace("{name}",a).replace("{count}",n.length.toString())})]})]})}),e.jsxs("div",{className:"border-2 border-amber-300/50 bg-amber-50/50 dark:bg-amber-950/20 rounded-xl p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx(_t,{className:"h-4 w-4 text-amber-600"}),e.jsx("span",{className:"text-sm font-semibold text-amber-700 dark:text-amber-400",children:o("complaint.warning.history")}),e.jsx(U,{variant:"secondary",className:"bg-amber-100 text-amber-700 dark:bg-amber-900/50 dark:text-amber-400 ml-auto",children:n.length})]}),e.jsx(ht,{className:"max-h-52",children:e.jsx("div",{className:"space-y-3",children:n.sort((i,c)=>new Date(c.createdAt).getTime()-new Date(i.createdAt).getTime()).slice(0,5).map(i=>e.jsxs("div",{className:"bg-white/60 dark:bg-background/40 rounded-lg p-3 border border-amber-200/50",children:[e.jsx("p",{className:"text-sm text-foreground leading-relaxed",children:i.description}),e.jsxs("div",{className:"flex items-center gap-3 mt-2 text-xs text-muted-foreground",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(Se,{className:"h-3 w-3"}),new Date(i.createdAt).toLocaleDateString("en-GB")]}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(he,{className:"h-3 w-3"}),i.createdByName]})]})]},i.id))})})]}),e.jsxs(Pt,{className:"gap-2 sm:gap-0",children:[e.jsxs(F,{variant:"outline",onClick:l,children:[e.jsx(ue,{className:"h-4 w-4 mr-2"}),o("complaint.warning.goBack")]}),e.jsxs(F,{onClick:r,className:"bg-amber-600 hover:bg-amber-700 text-white",children:[o("complaint.warning.continue"),e.jsx(Ve,{className:"h-4 w-4 ml-2"})]})]})]})})}const R=[{id:"vehicle",labelKey:"jobs.steps.vehicle",icon:_e},{id:"customer",labelKey:"jobs.steps.customer",icon:he},{id:"details",labelKey:"jobs.steps.details",icon:ts},{id:"category",labelKey:"jobs.steps.category",icon:de},{id:"review",labelKey:"jobs.steps.review",icon:Rt}];function Wr(){const{user:s}=xt(),{t}=re(),a=ft(),{toast:n}=Ms(),[r,l]=j.useState(0),[o,i]=j.useState(null),[c,m]=j.useState(!1),u=j.useRef(!1),[x,d]=j.useState(!1),[g,p]=j.useState([]),[C,y]=j.useState(!1),[h,M]=j.useState({customerName:"",customerPhone:"",customerEmail:"",customerNotes:"",customerPostCode:"",customerRegion:"",isReturningCustomer:!1,vehicleId:"",mileage:"",problemDescription:"",priority:"normal",serviceType:"repair",assignedMechanicId:"",scheduledDate:void 0,estimatedDuration:60}),[W,$]=j.useState({}),f=k=>{M(b=>({...b,...k}));const D={...W};Object.keys(k).forEach(b=>{delete D[b]}),$(D),"customerPhone"in k&&(y(!1),p([]))},P=k=>{const D={};switch(k){case 0:h.vehicleId||(D.vehicleId=t("validation.selectVehicle"));break;case 1:h.customerName.trim()||(D.customerName=t("validation.customerNameRequired")),h.customerPhone.trim()||(D.customerPhone=t("validation.phoneRequired")),h.customerEmail&&!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(h.customerEmail)&&(D.customerEmail=t("validation.invalidEmail"));break;case 2:h.problemDescription.length<10&&(D.problemDescription=t("validation.descriptionMinLength"));break}return $(D),Object.keys(D).length===0},N=async()=>{if(h.customerPhone.trim()){try{const k=await kt(h.customerPhone.trim());if(k!=null&&k.complaints&&k.complaints.length>0&&!C)return p(k.complaints),d(!0),!0}catch(k){console.error("Error checking customer complaints:",k)}return!1}},_=async()=>{if(P(r)){if(r===1&&!C&&await N())return;l(k=>Math.min(k+1,R.length-1))}},I=()=>{l(k=>Math.max(k-1,0))},T=k=>{k<r&&l(k)},Y=async()=>{if(!(!s||u.current)){u.current=!0,m(!0);try{const k=await gt(h.customerName,h.customerPhone,h.customerEmail||void 0,h.customerPostCode||void 0,h.customerRegion||void 0);h.vehicleId&&k&&(await bt(k,h.vehicleId),o&&!o.customerId&&await jt(o.id,{customerId:k}));const D={jobNumber:yt(),vehicleId:h.vehicleId,...o&&{vehicleLicensePlate:o.licensePlate,vehicleBrand:o.brand,vehicleModel:o.model,vehicleYear:o.year,...o.vin&&{vehicleVin:o.vin},...o.fuelType&&{vehicleFuelType:o.fuelType}},customerId:k,customerName:h.customerName,customerPhone:h.customerPhone,...h.customerPostCode&&{customerPostCode:h.customerPostCode},...h.customerRegion&&{customerRegion:h.customerRegion},problemDescription:h.problemDescription,priority:h.priority,serviceType:h.serviceType,status:"not_started",estimatedDuration:h.estimatedDuration,createdBy:s.id,...h.scheduledDate&&{scheduledDate:h.scheduledDate.toISOString()},...h.customerEmail&&{customerEmail:h.customerEmail},...h.customerNotes&&{customerNotes:h.customerNotes},...h.faultCategory&&{faultCategory:h.faultCategory},...h.assignedMechanicId&&{assignedMechanicId:h.assignedMechanicId},...h.mileage&&{mileage:parseInt(h.mileage)}},b=await Ct(D),v=await Nt(b,s.id);if(console.log("Created job with ID:",v),h.assignedMechanicId)try{await wt(v,h.assignedMechanicId,`${h.customerName} - ${b.jobNumber}`)}catch(L){console.error("Error sending assignment notification:",L)}n({title:t("jobs.newJob"),description:t("jobs.createdSuccess")}),window.location.href=s.role==="office_staff"?"/office":"/jobs"}catch(k){console.error("Error creating job:",k),n({variant:"destructive",title:"Error",description:"Failed to create job. Please try again."}),u.current=!1,m(!1)}}},Z=k=>{i(k),f({vehicleId:k.id})},se=()=>{switch(r){case 0:return e.jsx(Xt,{formData:h,selectedVehicle:o,error:W.vehicleId,onVehicleSelect:Z,onClearVehicle:()=>{i(null),f({vehicleId:"",mileage:""})},onUpdate:f});case 1:return e.jsx(Ut,{formData:h,errors:W,onUpdate:f,selectedVehicle:o});case 2:return e.jsx(Or,{formData:h,errors:W,onUpdate:f,hideScheduling:(s==null?void 0:s.role)==="office_staff"});case 3:return e.jsx(Fr,{formData:h,errors:W,onUpdate:f});case 4:return e.jsx(Er,{formData:h,selectedVehicle:o,onEdit:T,hideScheduling:(s==null?void 0:s.role)==="office_staff"});default:return null}};return vt()?e.jsxs("div",{className:"safe-top min-h-screen bg-background relative overflow-hidden",children:[e.jsxs("div",{className:"fixed inset-0 overflow-hidden pointer-events-none",children:[e.jsx("div",{className:"absolute inset-0 gradient-royal-radial opacity-5"}),e.jsx("div",{className:"absolute top-0 right-0 w-64 h-64 bg-primary/10 rounded-full blur-3xl animate-pulse-subtle"}),e.jsx("div",{className:"absolute bottom-1/3 left-0 w-64 h-64 bg-gold/10 rounded-full blur-3xl animate-pulse-subtle",style:{animationDelay:"1s"}})]}),e.jsxs("div",{className:"relative px-4 pt-4 pb-3 flex items-center gap-4 glass-light border-b backdrop-blur-xl",children:[e.jsx(F,{variant:"ghost",size:"icon",onClick:()=>a((s==null?void 0:s.role)==="office_staff"?"/office":-1),className:"hover:bg-primary/10 hover:text-primary transition-all",children:e.jsx(ue,{className:"h-5 w-5"})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("h1",{className:"text-xl font-bold text-gradient-royal flex items-center gap-2",children:[t("jobs.newJob"),r===R.length-1&&e.jsx(ae,{className:"h-5 w-5 text-gold animate-pulse"})]}),e.jsx("p",{className:"text-xs text-muted-foreground mt-0.5",children:e.jsxs("span",{className:"px-2 py-0.5 rounded-full bg-primary/10 text-primary font-medium text-xs",children:["Step ",r+1,"/",R.length]})})]})]}),e.jsx("div",{className:"relative px-4 py-6",children:e.jsx("div",{className:"glass-light rounded-2xl p-4 border-0 shadow-premium",children:e.jsxs("div",{className:"flex items-center justify-between relative",children:[e.jsx("div",{className:"absolute top-5 left-0 right-0 h-1 bg-muted/50 rounded-full mx-8",children:e.jsx("div",{className:"h-full gradient-royal rounded-full transition-all duration-500 ease-out shadow-glow",style:{width:`${r/(R.length-1)*100}%`}})}),R.map((k,D)=>{const b=k.icon,v=D<r,L=D===r;return e.jsxs("button",{onClick:()=>T(D),disabled:D>r,className:"relative z-10 flex flex-col items-center gap-2 transition-all touch-manipulation",children:[e.jsxs("div",{className:O("w-10 h-10 rounded-xl flex items-center justify-center transition-all duration-300 relative",v&&"gradient-royal shadow-glow scale-105",L&&"gradient-royal shadow-glow scale-110 ring-4 ring-primary/20",!v&&!L&&"bg-muted text-muted-foreground"),children:[v?e.jsx(je,{className:"h-5 w-5 text-white"}):e.jsx(b,{className:O("h-5 w-5",L&&"text-white",!L&&!v&&"text-muted-foreground")}),L&&D===R.length-1&&e.jsx(ae,{className:"absolute -top-1 -right-1 h-3 w-3 text-gold animate-pulse"})]}),e.jsx("span",{className:O("text-xs font-medium transition-colors",L&&"text-primary font-semibold",!L&&"text-muted-foreground"),children:t(k.labelKey)})]},k.id)})]})})}),e.jsx("div",{className:"relative px-4 pb-32 animate-slide-up",children:se()},r),e.jsx("div",{className:"fixed bottom-0 left-0 right-0 glass-strong backdrop-blur-xl border-t border-border/50 p-4 safe-bottom shadow-premium-xl",children:e.jsxs("div",{className:"flex gap-3 max-w-lg mx-auto",children:[r>0&&e.jsxs(F,{type:"button",variant:"outline",onClick:I,className:"flex-1 h-12 hover:bg-muted hover:border-primary/50 transition-all font-medium",children:[e.jsx(ue,{className:"mr-2 h-4 w-4"}),t("common.back")]}),r<R.length-1?e.jsxs(F,{type:"button",onClick:_,className:"flex-1 h-12 gradient-royal hover:shadow-glow transition-all font-semibold",children:[t("common.continue"),e.jsx(Ve,{className:"ml-2 h-5 w-5"})]}):e.jsx(F,{type:"button",onClick:Y,className:"flex-1 h-12 gradient-gold hover:shadow-glow-gold transition-all font-semibold text-gold-foreground",disabled:c,children:c?e.jsxs(e.Fragment,{children:[e.jsx(He,{className:"mr-2 h-5 w-5 animate-spin"}),t("jobs.creatingJob")]}):e.jsxs(e.Fragment,{children:[e.jsx(je,{className:"mr-2 h-5 w-5"}),t("dashboard.createJob"),e.jsx(ae,{className:"ml-2 h-4 w-4 animate-pulse"})]})})]})}),e.jsx(ws,{open:x,onOpenChange:d,customerName:h.customerName,complaints:g,onContinue:()=>{d(!1),y(!0),l(k=>Math.min(k+1,R.length-1))},onGoBack:()=>{d(!1)}})]}):e.jsxs("div",{className:"min-h-screen bg-background relative overflow-hidden",children:[e.jsxs("div",{className:"fixed inset-0 overflow-hidden pointer-events-none",children:[e.jsx("div",{className:"absolute inset-0 gradient-royal-radial opacity-5"}),e.jsx("div",{className:"absolute top-0 right-1/4 w-96 h-96 bg-primary/10 rounded-full blur-3xl animate-pulse-subtle"}),e.jsx("div",{className:"absolute bottom-0 left-1/4 w-96 h-96 bg-gold/10 rounded-full blur-3xl animate-pulse-subtle",style:{animationDelay:"1s"}})]}),e.jsx("div",{className:"relative border-b glass-light backdrop-blur-xl",children:e.jsx("div",{className:"max-w-6xl mx-auto px-6 py-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-6",children:[e.jsx(F,{variant:"ghost",size:"icon",onClick:()=>a((s==null?void 0:s.role)==="office_staff"?"/office":-1),className:"hover:bg-primary/10 hover:text-primary transition-all",children:e.jsx(ue,{className:"h-5 w-5"})}),e.jsxs("div",{children:[e.jsxs("h1",{className:"text-3xl font-bold text-gradient-royal flex items-center gap-2",children:[t("jobs.newJob"),r===R.length-1&&e.jsx(ae,{className:"h-6 w-6 text-gold animate-pulse"})]}),e.jsxs("p",{className:"text-sm text-muted-foreground mt-1 flex items-center gap-2",children:[e.jsxs("span",{className:"px-3 py-1 rounded-full bg-primary/10 text-primary font-medium",children:["Step ",r+1," of ",R.length]}),e.jsx("span",{className:"text-foreground/60",children:"—"}),e.jsx("span",{children:R[r].label})]})]})]}),e.jsxs(F,{variant:"ghost",onClick:()=>a((s==null?void 0:s.role)==="office_staff"?"/office":"/jobs"),className:"hover:bg-destructive/10 hover:text-destructive transition-all",children:[e.jsx(pt,{className:"h-5 w-5 mr-2"}),t("common.cancel")]})]})})}),e.jsx("div",{className:"max-w-6xl mx-auto p-8 relative",children:e.jsxs("div",{className:"grid grid-cols-4 gap-8",children:[e.jsx("div",{className:"col-span-1",children:e.jsxs(B,{className:"glass-strong border-0 shadow-premium-lg sticky top-8 overflow-hidden",children:[e.jsx("div",{className:"absolute inset-0 gradient-royal-radial opacity-5"}),e.jsx("div",{className:"relative p-6 space-y-2",children:R.map((k,D)=>{const b=k.icon,v=D<r,L=D===r;return e.jsxs("button",{onClick:()=>T(D),disabled:D>r,className:O("w-full flex items-center gap-4 p-4 rounded-xl text-left transition-all duration-300 group relative overflow-hidden",v&&"text-primary hover:bg-primary/5",L&&"glass-light text-primary shadow-glow",!v&&!L&&"text-muted-foreground hover:bg-muted/50",D>r&&"opacity-40 cursor-not-allowed"),children:[e.jsxs("div",{className:O("relative w-10 h-10 rounded-xl flex items-center justify-center transition-all duration-300 text-sm shrink-0",v&&"gradient-royal shadow-glow",L&&"gradient-royal shadow-glow scale-110",!v&&!L&&"bg-muted group-hover:bg-muted-foreground/20"),children:[v?e.jsx(je,{className:"h-5 w-5 text-white"}):e.jsx(b,{className:O("h-5 w-5",L&&"text-white",!L&&!v&&"text-muted-foreground")}),L&&D===R.length-1&&e.jsx(ae,{className:"absolute -top-1 -right-1 h-4 w-4 text-gold animate-pulse"})]}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:O("font-semibold text-sm mb-0.5 transition-colors",L&&"text-primary"),children:t(k.labelKey)}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[D===0&&t("jobs.steps.vehicleDesc"),D===1&&t("jobs.steps.customerDesc"),D===2&&t("jobs.steps.detailsDesc"),D===3&&t("jobs.steps.categoryDesc"),D===4&&t("jobs.steps.reviewDesc")]})]}),L&&e.jsx("div",{className:"absolute left-0 top-0 bottom-0 w-1 bg-gradient-to-b from-primary to-gold rounded-r-full"})]},k.id)})})]})}),e.jsxs("div",{className:"col-span-3",children:[e.jsx("div",{className:"animate-slide-up",children:se()},r),e.jsxs("div",{className:"flex justify-between items-center mt-8 pt-6 glass-light rounded-2xl px-6 py-4 border-0 shadow-premium",children:[e.jsxs(F,{type:"button",variant:"outline",onClick:r>0?I:()=>a((s==null?void 0:s.role)==="office_staff"?"/office":"/jobs"),size:"lg",className:"hover:bg-muted hover:border-primary/50 transition-all hover-lift h-12 px-6",children:[e.jsx(ue,{className:"mr-2 h-4 w-4"}),r>0?t("common.back"):t("common.cancel")]}),r<R.length-1?e.jsxs(F,{type:"button",onClick:_,size:"lg",className:"gradient-royal hover:shadow-glow transition-all h-12 px-8 font-semibold",children:[t("common.continue"),e.jsx(Ve,{className:"ml-2 h-5 w-5"})]}):e.jsx(F,{type:"button",onClick:Y,size:"lg",disabled:c,className:"gradient-gold hover:shadow-glow-gold transition-all h-12 px-8 font-semibold text-gold-foreground",children:c?e.jsxs(e.Fragment,{children:[e.jsx(He,{className:"mr-2 h-5 w-5 animate-spin"}),t("jobs.creatingJob")]}):e.jsxs(e.Fragment,{children:[e.jsx(je,{className:"mr-2 h-5 w-5"}),t("dashboard.createJob"),e.jsx(ae,{className:"ml-2 h-4 w-4 animate-pulse"})]})})]})]})]})}),e.jsx(ws,{open:x,onOpenChange:d,customerName:h.customerName,complaints:g,onContinue:()=>{d(!1),y(!0),l(k=>Math.min(k+1,R.length-1))},onGoBack:()=>{d(!1)}})]})}function hn(){return e.jsx(Wr,{})}export{hn as default};
