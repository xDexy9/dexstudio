import{c as v,bB as o,bP as y,bC as h}from"./index-CNxWMcuV.js";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T=v("Receipt",[["path",{d:"M4 2v20l2-1 2 1 2-1 2 1 2-1 2 1 2-1 2 1V2l-2 1-2-1-2 1-2-1-2 1-2-1-2 1Z",key:"q3az6g"}],["path",{d:"M16 8h-6a2 2 0 1 0 0 4h4a2 2 0 1 1 0 4H8",key:"1h4pet"}],["path",{d:"M12 17.5v-11",key:"1jc1ny"}]]),f=async(a,e,n,i)=>{const t=o.jobs.find(c=>c.id===a),s=o.customers.find(c=>c.id===(t==null?void 0:t.customerId)),m=e.reduce((c,r)=>c+r.subtotal,0),g=e.reduce((c,r)=>c+r.discountAmount,0),p=e.reduce((c,r)=>c+r.taxAmount,0),d=e.reduce((c,r)=>c+r.total,0);return l({jobId:a,customerId:t==null?void 0:t.customerId,vehicleId:t==null?void 0:t.vehicleId,customer:{name:(t==null?void 0:t.customerName)||"",phone:(t==null?void 0:t.customerPhone)||"",email:s==null?void 0:s.email},vehicle:{brand:(t==null?void 0:t.vehicleBrand)||"",model:(t==null?void 0:t.vehicleModel)||"",year:(t==null?void 0:t.vehicleYear)||0,licensePlate:(t==null?void 0:t.vehicleLicensePlate)||""},lineItems:e,subtotal:m,discountTotal:g,taxTotal:p,grandTotal:d,currency:"EUR",paymentStatus:"unpaid",paidAmount:0,remainingAmount:d,dueDate:new Date(Date.now()+30*864e5).toISOString(),notes:i==null?void 0:i.notes,payments:[]},n)},u=()=>new Date().toISOString(),l=async(a,e)=>{const n=y(),i=o.companySettings.nextInvoiceNumber;o.companySettings.nextInvoiceNumber++;const t=`${o.companySettings.invoicePrefix}-${new Date().getFullYear()}-${String(i).padStart(3,"0")}`;return o.invoices.push({id:n,invoiceNumber:t,createdAt:u(),updatedAt:u(),createdBy:e,updatedBy:e,...a}),h(),n},A=async a=>o.invoices.find(e=>e.id===a)||null,I=async a=>o.invoices.filter(e=>e.jobId===a),w=async()=>[...o.invoices].sort((a,e)=>new Date(e.createdAt).getTime()-new Date(a.createdAt).getTime()),D=async(a,e)=>{const n=o.quotes.find(i=>i.id===a);if(!n)throw new Error("Quote not found");return l({jobId:n.jobId,customerId:n.customerId,vehicleId:n.vehicleId,quoteId:n.id,customer:n.customer,vehicle:n.vehicle,lineItems:n.lineItems,subtotal:n.subtotal,discountTotal:n.discountTotal,taxTotal:n.taxTotal,grandTotal:n.grandTotal,currency:n.currency,paymentStatus:"unpaid",paidAmount:0,remainingAmount:n.grandTotal,dueDate:new Date(Date.now()+30*864e5).toISOString(),payments:[]},e)},x=a=>I(a),B=async()=>{const a=o.invoices;return{total:a.length,unpaid:a.filter(e=>e.paymentStatus==="unpaid").length,partial:a.filter(e=>e.paymentStatus==="partial").length,paid:a.filter(e=>e.paymentStatus==="paid").length,overdue:a.filter(e=>e.paymentStatus==="overdue").length,totalValue:a.reduce((e,n)=>e+n.grandTotal,0),paidValue:a.reduce((e,n)=>e+(n.paidAmount||0),0),outstandingValue:a.reduce((e,n)=>e+(n.remainingAmount||n.grandTotal),0)}};export{T as R,B as a,A as b,D as c,x as d,f as e,w as g};
