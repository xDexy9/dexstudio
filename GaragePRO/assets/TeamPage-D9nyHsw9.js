import{c as ie,u as ce,r as n,j as e,B as h,e as b,i as y,ao as Q,N as f,_ as x,A as de,g as z,l as oe,m as me,M as xe,Z as he,a as I,bl as ue,bg as je,y as fe,aS as ge,bm as pe,bn as Ne,bo as ve,ap as $}from"./index-CNxWMcuV.js";import{D as be,a as ye,E as we,b as Ce,c as H}from"./dropdown-menu-B4ssD23R.js";import{D as U,b as k,c as F,d as O,e as R,f as P}from"./dialog-CIS6byhQ.js";import{S as g,a as p,b as N,c as v,d as l}from"./select-CbHlLrev.js";import{P as Se}from"./progress-CO30qKou.js";import{u as Me}from"./use-toast-C9pXjDz0.js";import{U as De}from"./user-plus-CavHknNn.js";import{U as K}from"./users-iVsLoBHZ.js";import{B as q}from"./briefcase-CQ_aZddD.js";import{S as Le}from"./search-vDLcJ1l5.js";import{F as Ae}from"./filter-BR7a_zVs.js";import{S as Ee}from"./square-pen-wrU9Jooq.js";import{C as Te}from"./calendar-BxIrFUaJ.js";import{f as Ue}from"./format-DSNd7y_7.js";import"./chevron-down-n_8xVDCk.js";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ke=ie("Crown",[["path",{d:"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z",key:"1vdc57"}],["path",{d:"M5 21h14",key:"11awu3"}]]),Fe={admin:{label:"Admin",className:"bg-red-50 text-red-700 border-red-200",icon:$},manager:{label:"Manager",className:"bg-violet-50 text-violet-700 border-violet-200",icon:$},office_staff:{label:"Office Staff",className:"bg-blue-50 text-blue-700 border-blue-200",icon:q},mechanic:{label:"Mechanic",className:"bg-emerald-50 text-emerald-700 border-emerald-200",icon:Q}};function Oe({role:t}){const i=Fe[t],j=i.icon;return e.jsxs("span",{className:I("inline-flex items-center gap-1.5 px-2.5 py-1 rounded-md text-xs font-medium border",i.className),children:[e.jsx(j,{className:"h-3 w-3"}),i.label]})}function Re({user:t,stats:i,onEdit:j,onDelete:u}){const d=i?Math.min(100,60+Math.random()*40):0;return e.jsx(b,{className:"border-0 shadow-sm hover:shadow-md transition-all duration-300 group",children:e.jsxs(y,{className:"p-5",children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs(de,{className:"h-12 w-12",children:[z(t.email)&&e.jsx(oe,{src:z(t.email),alt:t.fullName}),e.jsx(me,{className:"text-lg font-semibold bg-gradient-to-br from-primary/20 to-primary/10 text-primary",children:t.fullName.split(" ").map(A=>A[0]).join("").slice(0,2)})]}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold",children:t.fullName}),e.jsx(Oe,{role:t.role})]})]}),e.jsxs(be,{children:[e.jsx(ye,{asChild:!0,children:e.jsx(h,{variant:"ghost",size:"icon",className:"h-8 w-8 opacity-0 group-hover:opacity-100 transition-opacity",children:e.jsx(we,{className:"h-4 w-4"})})}),e.jsxs(Ce,{align:"end",children:[e.jsxs(H,{onClick:j,children:[e.jsx(Ee,{className:"h-4 w-4 mr-2"}),"Edit"]}),e.jsxs(H,{className:"text-destructive",onClick:u,children:[e.jsx(xe,{className:"h-4 w-4 mr-2"}),"Remove"]})]})]})]}),e.jsxs("div",{className:"space-y-3 text-sm",children:[e.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground",children:[e.jsx(he,{className:"h-4 w-4"}),e.jsx("span",{className:"truncate",children:t.email})]}),e.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground",children:[e.jsx(Te,{className:"h-4 w-4"}),e.jsxs("span",{children:["Joined ",Ue(new Date(t.createdAt),"MM/yyyy")]})]})]}),i&&e.jsxs("div",{className:"mt-4 pt-4 border-t",children:[e.jsxs("div",{className:"grid grid-cols-3 gap-2 text-center",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-lg font-bold text-emerald-600",children:i.completedJobs}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Completed"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-lg font-bold text-blue-600",children:i.activeJobs}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Active"})]}),e.jsxs("div",{children:[e.jsxs("p",{className:"text-lg font-bold text-amber-600",children:[i.avgTime,"m"]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Avg Time"})]})]}),e.jsxs("div",{className:"mt-3",children:[e.jsxs("div",{className:"flex items-center justify-between text-xs mb-1",children:[e.jsx("span",{className:"text-muted-foreground",children:"Efficiency"}),e.jsxs("span",{className:I("font-medium",d>=80?"text-emerald-600":d>=60?"text-amber-600":"text-red-600"),children:[Math.round(d),"%"]})]}),e.jsx(Se,{value:d,className:I("h-2",d>=80?"[&>div]:bg-emerald-500":d>=60?"[&>div]:bg-amber-500":"[&>div]:bg-red-500")})]})]})]})})}function Ye(){ce();const{toast:t}=Me(),[i,j]=n.useState(""),[u,d]=n.useState("all"),[A,w]=n.useState(!1),[W,C]=n.useState(!1),[Z,S]=n.useState(!1),[o,M]=n.useState(null),[G,E]=n.useState(0),[m,X]=n.useState([]),[Y,ee]=n.useState([]),[Pe,ae]=n.useState([]),[V,_]=n.useState(!0),[r,c]=n.useState({fullName:"",email:"",role:"mechanic",preferredLanguage:"en"});n.useEffect(()=>{(async()=>{try{_(!0);const[s,T,L]=await Promise.all([ue(),je(),fe()]);X(s),ee(T),ae(L)}catch(s){console.error("Error loading team data:",s)}finally{_(!1)}})()},[G]);const B=n.useMemo(()=>m.filter(a=>{var L,J;const s=(((L=a.fullName)==null?void 0:L.toLowerCase())||"").includes(i.toLowerCase())||(((J=a.email)==null?void 0:J.toLowerCase())||"").includes(i.toLowerCase()),T=u==="all"||a.role===u;return s&&T}),[m,i,u]),D=n.useMemo(()=>({total:m.length,admins:m.filter(a=>a.role==="admin").length,managers:m.filter(a=>a.role==="manager").length,office:m.filter(a=>a.role==="office_staff").length,mechanics:m.filter(a=>a.role==="mechanic").length}),[m]),se=()=>{const a={id:ge(),email:r.email,fullName:r.fullName,role:r.role,preferredLanguage:r.preferredLanguage,createdAt:new Date().toISOString()};pe(a),w(!1),c({fullName:"",email:"",role:"mechanic",preferredLanguage:"en"}),E(s=>s+1),t({title:"Team member added",description:`${a.fullName} has been added to the team.`})},le=async()=>{if(o)try{await Ne(o.id,{fullName:r.fullName,email:r.email,role:r.role,preferredLanguage:r.preferredLanguage}),C(!1),M(null),E(a=>a+1),t({title:"Team member updated",description:`${r.fullName}'s profile has been updated.`})}catch(a){console.error("Error updating user:",a),t({variant:"destructive",title:"Error",description:"Failed to update team member."})}},re=async()=>{if(o)try{await ve(o.id),S(!1);const a=o.fullName;M(null),E(s=>s+1),t({title:"Team member removed",description:`${a} has been removed from the team.`})}catch(a){console.error("Error deleting user:",a),t({variant:"destructive",title:"Error",description:"Failed to remove team member."})}},te=a=>{M(a),c({fullName:a.fullName,email:a.email,role:a.role,preferredLanguage:a.preferredLanguage}),C(!0)},ne=a=>Y.find(s=>s.id===a);return e.jsxs("div",{className:"space-y-8 pb-8",children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Team Management"}),e.jsx("p",{className:"text-muted-foreground",children:"Manage your workshop team members and their roles"})]}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsxs(h,{size:"sm",className:"h-9",onClick:()=>w(!0),children:[e.jsx(De,{className:"h-4 w-4 mr-2"}),"Add Member"]})})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsx(b,{className:"border-0 shadow-sm",children:e.jsx(y,{className:"p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(K,{className:"h-5 w-5 text-primary"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold",children:D.total}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Total Members"})]})]})})}),e.jsx(b,{className:"border-0 shadow-sm",children:e.jsx(y,{className:"p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(ke,{className:"h-5 w-5 text-violet-500"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold",children:D.managers}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Managers"})]})]})})}),e.jsx(b,{className:"border-0 shadow-sm",children:e.jsx(y,{className:"p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(q,{className:"h-5 w-5 text-blue-500"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold",children:D.office}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Office Staff"})]})]})})}),e.jsx(b,{className:"border-0 shadow-sm",children:e.jsx(y,{className:"p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Q,{className:"h-5 w-5 text-emerald-500"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold",children:D.mechanics}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Mechanics"})]})]})})})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"relative flex-1 max-w-md",children:[e.jsx(Le,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),e.jsx(f,{placeholder:"Search team members...",className:"pl-10 h-10 bg-muted/30 border-0",value:i,onChange:a=>j(a.target.value)})]}),e.jsxs(g,{value:u,onValueChange:d,children:[e.jsxs(p,{className:"w-44 h-10 bg-muted/30 border-0",children:[e.jsx(Ae,{className:"h-4 w-4 mr-2 text-muted-foreground"}),e.jsx(N,{placeholder:"Filter by role"})]}),e.jsxs(v,{children:[e.jsx(l,{value:"all",children:"All Roles"}),e.jsx(l,{value:"admin",children:"Admin"}),e.jsx(l,{value:"manager",children:"Manager"}),e.jsx(l,{value:"office_staff",children:"Office Staff"}),e.jsx(l,{value:"mechanic",children:"Mechanic"})]})]})]}),V&&e.jsx("div",{className:"text-center py-12",children:e.jsx("p",{className:"text-muted-foreground",children:"Loading team members..."})}),!V&&e.jsxs("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-5",children:[B.map(a=>e.jsx(Re,{user:a,stats:ne(a.id),onEdit:()=>te(a),onDelete:()=>{M(a),S(!0)}},a.id)),B.length===0&&e.jsxs("div",{className:"col-span-full text-center py-12",children:[e.jsx(K,{className:"h-12 w-12 text-muted-foreground/30 mx-auto mb-4"}),e.jsx("p",{className:"text-muted-foreground",children:"No team members found"})]})]}),e.jsx(U,{open:A,onOpenChange:w,children:e.jsxs(k,{className:"sm:max-w-md",children:[e.jsxs(F,{children:[e.jsx(O,{children:"Add Team Member"}),e.jsx(R,{children:"Add a new member to your workshop team."})]}),e.jsxs("div",{className:"space-y-4 py-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(x,{children:"Full Name"}),e.jsx(f,{value:r.fullName,onChange:a=>c(s=>({...s,fullName:a.target.value})),placeholder:"Enter full name"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(x,{children:"Email"}),e.jsx(f,{type:"email",value:r.email,onChange:a=>c(s=>({...s,email:a.target.value})),placeholder:"email@example.com"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(x,{children:"Role"}),e.jsxs(g,{value:r.role,onValueChange:a=>c(s=>({...s,role:a})),children:[e.jsx(p,{children:e.jsx(N,{})}),e.jsxs(v,{children:[e.jsx(l,{value:"mechanic",children:"Mechanic"}),e.jsx(l,{value:"office_staff",children:"Office Staff"}),e.jsx(l,{value:"manager",children:"Manager"}),e.jsx(l,{value:"admin",children:"Admin"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(x,{children:"Preferred Language"}),e.jsxs(g,{value:r.preferredLanguage,onValueChange:a=>c(s=>({...s,preferredLanguage:a})),children:[e.jsx(p,{children:e.jsx(N,{})}),e.jsxs(v,{children:[e.jsx(l,{value:"en",children:"English"}),e.jsx(l,{value:"fr",children:"Français"}),e.jsx(l,{value:"ro",children:"Română"}),e.jsx(l,{value:"pt",children:"Português"})]})]})]})]}),e.jsxs(P,{children:[e.jsx(h,{variant:"outline",onClick:()=>w(!1),children:"Cancel"}),e.jsx(h,{onClick:se,disabled:!r.fullName||!r.email,children:"Add Member"})]})]})}),e.jsx(U,{open:W,onOpenChange:C,children:e.jsxs(k,{className:"sm:max-w-md",children:[e.jsxs(F,{children:[e.jsx(O,{children:"Edit Team Member"}),e.jsx(R,{children:"Update team member information."})]}),e.jsxs("div",{className:"space-y-4 py-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(x,{children:"Full Name"}),e.jsx(f,{value:r.fullName,onChange:a=>c(s=>({...s,fullName:a.target.value}))})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(x,{children:"Email"}),e.jsx(f,{type:"email",value:r.email,onChange:a=>c(s=>({...s,email:a.target.value}))})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(x,{children:"Role"}),e.jsxs(g,{value:r.role,onValueChange:a=>c(s=>({...s,role:a})),children:[e.jsx(p,{children:e.jsx(N,{})}),e.jsxs(v,{children:[e.jsx(l,{value:"mechanic",children:"Mechanic"}),e.jsx(l,{value:"office_staff",children:"Office Staff"}),e.jsx(l,{value:"manager",children:"Manager"}),e.jsx(l,{value:"admin",children:"Admin"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(x,{children:"Preferred Language"}),e.jsxs(g,{value:r.preferredLanguage,onValueChange:a=>c(s=>({...s,preferredLanguage:a})),children:[e.jsx(p,{children:e.jsx(N,{})}),e.jsxs(v,{children:[e.jsx(l,{value:"en",children:"English"}),e.jsx(l,{value:"fr",children:"Français"}),e.jsx(l,{value:"ro",children:"Română"}),e.jsx(l,{value:"pt",children:"Português"})]})]})]})]}),e.jsxs(P,{children:[e.jsx(h,{variant:"outline",onClick:()=>C(!1),children:"Cancel"}),e.jsx(h,{onClick:le,children:"Save Changes"})]})]})}),e.jsx(U,{open:Z,onOpenChange:S,children:e.jsxs(k,{className:"sm:max-w-md",children:[e.jsxs(F,{children:[e.jsx(O,{children:"Remove Team Member"}),e.jsxs(R,{children:["Are you sure you want to remove ",o==null?void 0:o.fullName," from the team? This action cannot be undone."]})]}),e.jsxs(P,{children:[e.jsx(h,{variant:"outline",onClick:()=>S(!1),children:"Cancel"}),e.jsx(h,{variant:"destructive",onClick:re,children:"Remove"})]})]})})]})}export{Ye as default};
