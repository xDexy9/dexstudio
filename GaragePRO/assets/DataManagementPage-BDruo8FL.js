import{u as D,r as m,j as e,e as h,i as x,f as N,h as w,bf as y,B as b,M as a,bB as c,bC as p,s as o}from"./index-CNxWMcuV.js";import{A as T,a as L,b as k,c as F,d as q,e as B,f as S,g as E}from"./alert-dialog-BDITvcmU.js";import{T as v}from"./triangle-alert-CHSZJu74.js";import{C as f}from"./circle-check-big-a_8kXWWc.js";function O(){D();const[t,r]=m.useState(!1),[n,i]=m.useState(null),[u,j]=m.useState({}),g=[{name:"quotes",label:"Quotes",description:"All customer quotes and estimates",icon:a,warningLevel:"medium"},{name:"invoices",label:"Invoices",description:"All invoices and payment records",icon:a,warningLevel:"high"},{name:"vehicles",label:"Vehicles",description:"All vehicle records",icon:a,warningLevel:"medium"},{name:"customers",label:"Customers",description:"All customer contact information",icon:a,warningLevel:"medium"},{name:"jobs",label:"Jobs",description:"All work orders and job history",icon:a,warningLevel:"high"}],C=async s=>{r(!0);try{const l=c[s].length;c[s].length=0,p(),j(d=>({...d,[s]:l})),o.success("Data cleared successfully",{description:`Deleted ${l} ${s} records`,icon:e.jsx(f,{className:"h-4 w-4"})})}catch(l){o.error("Failed to clear data",{description:l instanceof Error?l.message:"An error occurred"})}finally{r(!1),i(null)}},A=async()=>{r(!0);try{for(const s of g){const l=c[s.name].length;c[s.name].length=0,j(d=>({...d,[s.name]:l}))}p(),o.success("All data cleared",{description:"All collections have been cleared",icon:e.jsx(f,{className:"h-4 w-4"})})}catch{o.error("Failed to clear all data")}finally{r(!1),i(null)}};return e.jsxs("div",{className:"container mx-auto p-6 max-w-4xl space-y-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold mb-2",children:"Data Management"}),e.jsx("p",{className:"text-muted-foreground",children:"Clear demo data collections. This action cannot be undone."})]}),e.jsx(h,{className:"border-destructive/50 bg-destructive/5",children:e.jsx(x,{className:"pt-6",children:e.jsxs("div",{className:"flex gap-3",children:[e.jsx(v,{className:"h-5 w-5 text-destructive shrink-0 mt-0.5"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-destructive mb-1",children:"Warning: Permanent Deletion"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Deleting data is permanent for this session. User accounts will NOT be deleted."})]})]})})}),e.jsxs(h,{children:[e.jsxs(N,{children:[e.jsx(w,{children:"Clear All Data"}),e.jsx(y,{children:"Delete all quotes, invoices, vehicles, customers, and jobs in one action"})]}),e.jsx(x,{children:e.jsxs(b,{variant:"destructive",size:"lg",onClick:()=>i("jobs"),disabled:t,className:"w-full",children:[e.jsx(a,{className:"h-4 w-4 mr-2"}),t?"Clearing...":"Clear All Data"]})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h2",{className:"text-xl font-semibold",children:"Clear Individual Collections"}),e.jsx("div",{className:"grid gap-4",children:g.map(s=>e.jsx(h,{children:e.jsx(x,{className:"pt-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-semibold mb-1",children:s.label}),e.jsx("p",{className:"text-sm text-muted-foreground",children:s.description}),u[s.name]&&e.jsxs("p",{className:"text-xs text-green-600 dark:text-green-400 mt-1",children:["Deleted ",u[s.name]," records"]})]}),e.jsxs(b,{variant:s.warningLevel==="high"?"destructive":"outline",onClick:()=>i(s.name),disabled:t,children:[e.jsx(a,{className:"h-4 w-4 mr-2"}),"Clear"]})]})})},s.name))})]}),e.jsx(T,{open:n!==null,onOpenChange:()=>i(null),children:e.jsxs(L,{children:[e.jsxs(k,{children:[e.jsxs(F,{className:"flex items-center gap-2",children:[e.jsx(v,{className:"h-5 w-5 text-destructive"}),"Confirm Deletion"]}),e.jsx(q,{children:n==="jobs"?e.jsxs(e.Fragment,{children:[e.jsx("p",{className:"mb-3",children:e.jsx("strong",{children:"You are about to delete ALL data:"})}),e.jsxs("ul",{className:"list-disc list-inside space-y-1 mb-3",children:[e.jsx("li",{children:"All quotes"}),e.jsx("li",{children:"All invoices"}),e.jsx("li",{children:"All vehicles"}),e.jsx("li",{children:"All customers"}),e.jsx("li",{children:"All jobs"})]}),e.jsx("p",{className:"font-semibold text-destructive",children:"This cannot be undone."})]}):e.jsxs(e.Fragment,{children:["Are you sure you want to delete all ",e.jsx("strong",{className:"text-destructive",children:n}),"? This cannot be undone."]})})]}),e.jsxs(B,{children:[e.jsx(S,{disabled:t,children:"Cancel"}),e.jsx(E,{onClick:()=>{n==="jobs"?A():n&&C(n)},disabled:t,className:"bg-destructive hover:bg-destructive/90",children:t?"Deleting...":"Delete Permanently"})]})]})})]})}export{O as default};
